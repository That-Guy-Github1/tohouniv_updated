#health
#mana
#action_points
th_gui_update_danmaku_bar_own_ruler = {
	set_variable = { which = th_danmaku_$type$_var which = th_danmaku_$type$ }
	if = {
		limit = { check_variable = { which = th_danmaku_max_$type$ value = 0.001 } }
		divide_variable = {
			which = th_danmaku_$type$_var
			which = th_danmaku_max_$type$
		}
	}
	multiply_variable = { which = th_danmaku_$type$_var value = 100 }
}
th_gui_update_danmaku_bar_enemy_character = {
	set_variable = { which = th_danmaku_enemy_$type$_var which = th_enemy_character_current_$type$ }
	if = {
		limit = { check_variable = { which = th_enemy_character_max_$type$ value = 0.001 } }
		divide_variable = {
			which = th_danmaku_enemy_$type$_var
			which = th_enemy_character_max_$type$
		}
	}
	multiply_variable = { which = th_danmaku_enemy_$type$_var value = 100 }
}
th_gui_update_exp_bar = {
	set_variable = { which = th_danmaku_exp_var which = th_danmaku_current_exp }
	if = {
		limit = { check_variable = { which = th_danmaku_exp_threshold value = 0.001 } }
		divide_variable = {
			which = th_danmaku_exp_var
			which = th_danmaku_exp_threshold
		}
	}
	multiply_variable = { which = th_danmaku_exp_var value = 100 }
}
th_gui_get_enemy_resource_bar = {
	if = {
		limit = { has_saved_event_target = enemy_duelist }
		event_target:enemy_duelist = {
			set_variable = {
				which = th_danmaku_source_transfer_$type$
				which = th_danmaku_$type$_var
			}
			PREV = {
				set_variable = {
					which = th_danmaku_source_transfer_$type$
					which = PREV
				}
				set_variable = { 
					which = th_danmaku_enemy_$type$_var 
					which = th_danmaku_source_transfer_$type$ 
				}
			}
		}
	}
}
th_gui_update_enemy_resource_bar = {
	set_variable = {
		which = th_danmaku_source_transfer_$type$
		which = th_danmaku_$type$_var
	}
	th_create_event_target_enemy_duelist = yes
	if = {
		limit = { has_saved_event_target = enemy_duelist }
		event_target:enemy_duelist = {
			set_variable = {
				which = th_danmaku_source_transfer_$type$
				which = PREV
			}
			set_variable = { 
				which = th_danmaku_enemy_$type$_var 
				which = th_danmaku_source_transfer_$type$ 
			}
		}
	}
}

th_gui_change_item_page_previous = {
	subtract_variable = {
		which = th_gui_$items$_page
		value = 1
	}
}
th_gui_change_item_page_next = {
	change_variable = {
		which = th_gui_$items$_page
		value = 1
	}
}
th_gui_change_item_page = {
	th_gui_change_item_page_$page$ = { items = $items$ }
}

th_clear_previous_selections = {
	set_variable = { which = th_selected_$type$ value = 0 }
	clr_country_flag = th_has_selected_item_of_$type$
}
th_select_item_iron_sword = { set_variable = { which = th_selected_weapon value = 1 } }
th_select_item = {
	hidden_effect = {
		th_clear_previous_selections = { type = $type$ }
		th_select_item_$item$ = yes
		set_country_flag = th_has_selected_item_of_$type$
	}
}