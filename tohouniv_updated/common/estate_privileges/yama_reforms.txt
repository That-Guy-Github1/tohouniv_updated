#Yama Reforms

#First reform tier
th_estate_yama_establish_lecturing = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = -0.05
	influence = 0.01
	is_valid = {
		NOT = { has_country_flag = hig_passed_first_reform_finisher }
	}
	can_select = {
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		hig_enable_lecturing = yes
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1001
				}
			}
		}
	}
	on_revoked = {
		hig_disable_lecturing = yes
	}
	on_invalid = {
		hig_disable_lecturing = yes
	}
	penalties = {
	}
	benefits = {
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_regulate_conquest = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = -0.05
	influence = 0.01
	is_valid = {
		NOT = { has_country_flag = hig_passed_first_reform_finisher }
	}
	can_select = {
		hig_enable_enforce_gensokyan_peace = yes
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1002
				}
			}
		}
	}
	on_revoked = {
		hig_disable_enforce_gensokyan_peace = yes
	}
	on_invalid = {
		hig_disable_enforce_gensokyan_peace = yes
	}
	penalties = {
	}
	benefits = {
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_enforce_peace = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = -0.05
	influence = 0.01
	is_valid = {
		NOT = { has_country_flag = hig_passed_first_reform_finisher }
	}
	can_select = {
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		hig_enable_demand_unlawful_territory = yes
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1003
				}
			}
		}
	}
	on_revoked = {
		hig_disable_demand_unlawful_territory = yes
	}
	on_invalid = {
		hig_disable_demand_unlawful_territory = yes
	}
	penalties = {
	}
	benefits = {
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_internal_higan_reform = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = 0.15
	influence = 0.01
	is_valid = {
		NOT = { has_country_flag = hig_passed_first_reform_finisher }
	}
	can_select = {
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1004
				}
			}
		}
	}
	on_revoked = {
	}
	#on_invalid = {
	#}
	penalties = {
	}
	benefits = {
		legitimacy = 0.25
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_gensokyan_edict = {	#Finisher of the first reform tier
	icon = th_privilege_third_eye
	land_share = 0
	max_absolutism = 5
	loyalty = 0.05
	influence = 0.05
	is_valid = {
		th_has_unlocked_privilege_no_tooltip = {
			estate_privilege = th_estate_yama_gensokyan_edict
		}
	}
	can_select = {}
	on_granted = {
		hig_enable_lecturing = yes
		hig_enable_enforce_gensokyan_peace = yes
		hig_enable_demand_unlawful_territory = yes
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1005
				}
			}
		}
	}
	on_revoked = {
		add_stability = -6
		hig_disable_lecturing = yes
		hig_disable_enforce_gensokyan_peace = yes
		hig_disable_demand_unlawful_territory = yes
	}
	on_invalid = {
		hig_disable_lecturing = yes
		hig_disable_enforce_gensokyan_peace = yes
		hig_disable_demand_unlawful_territory = yes
	}
	penalties = {
	}
	benefits = {
		legitimacy = 0.25
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

#Second reform tier
th_estate_yama_appoint_executor = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = -0.05
	influence = 0.01
	is_valid = {
		has_country_flag = hig_passed_first_reform_finisher
		NOT = { has_country_flag = hig_passed_second_reform_finisher }
	}
	can_select = {
		hig_enable_enforce_gensokyan_peace = yes
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1006
				}
			}
		}
	}
	on_revoked = {
		hig_disable_enforce_gensokyan_peace = yes
	}
	on_invalid = {
		hig_disable_enforce_gensokyan_peace = yes
	}
	penalties = {
	}
	benefits = {
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_reform_the_judicative = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = -0.05
	influence = 0.01
	is_valid = {
		has_country_flag = hig_passed_first_reform_finisher
		NOT = { has_country_flag = hig_passed_second_reform_finisher }
	}
	can_select = {
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		hig_enable_demand_unlawful_territory = yes
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1007
				}
			}
		}
	}
	on_revoked = {
		hig_disable_demand_unlawful_territory = yes
	}
	on_invalid = {
		hig_disable_demand_unlawful_territory = yes
	}
	penalties = {
	}
	benefits = {
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_restore_the_hakurei_barrier = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = 0.15
	influence = 0.01
	is_valid = {
		has_country_flag = hig_passed_first_reform_finisher
		NOT = { has_country_flag = hig_passed_second_reform_finisher }
	}
	can_select = {
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1008
				}
			}
		}
	}
	on_revoked = {
	}
	#on_invalid = {
	#}
	penalties = {
	}
	benefits = {
		legitimacy = 0.25
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_establish_shrine_purpose = {	#Finisher of the second reform tier
	icon = th_privilege_third_eye
	land_share = 0
	max_absolutism = 5
	loyalty = 0.05
	influence = 0.05
	is_valid = {
		th_has_unlocked_privilege_no_tooltip = {
			estate_privilege = th_estate_yama_establish_shrine_purpose
		}
	}
	can_select = {}
	on_granted = {
		hig_enable_lecturing = yes
		hig_enable_enforce_gensokyan_peace = yes
		hig_enable_demand_unlawful_territory = yes
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1009
				}
			}
		}
	}
	on_revoked = {
		add_stability = -6
		hig_disable_lecturing = yes
		hig_disable_enforce_gensokyan_peace = yes
		hig_disable_demand_unlawful_territory = yes
	}
	on_invalid = {
		hig_disable_lecturing = yes
		hig_disable_enforce_gensokyan_peace = yes
		hig_disable_demand_unlawful_territory = yes
	}
	penalties = {
	}
	benefits = {
		legitimacy = 0.25
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

#Third reform tier
th_estate_yama_centralize_gensokyan_authority = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = -0.05
	influence = 0.01
	is_valid = {
		has_country_flag = hig_passed_first_reform_finisher
		has_country_flag = hig_passed_second_reform_finisher
		NOT = { has_country_flag = hig_passed_third_reform_finisher }
	}
	can_select = {
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		hig_enable_demand_unlawful_territory = yes
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1010
				}
			}
		}
	}
	on_revoked = {
		hig_disable_demand_unlawful_territory = yes
	}
	on_invalid = {
		hig_disable_demand_unlawful_territory = yes
	}
	penalties = {
	}
	benefits = {
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_expand_roles = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = 0.15
	influence = 0.01
	is_valid = {
		has_country_flag = hig_passed_first_reform_finisher
		has_country_flag = hig_passed_second_reform_finisher
		NOT = { has_country_flag = hig_passed_third_reform_finisher }
	}
	can_select = {
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1011
				}
			}
		}
	}
	on_revoked = {
	}
	#on_invalid = {
	#}
	penalties = {
	}
	benefits = {
		legitimacy = 0.25
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_eternal_peace = {	#Finisher of the third reform tier
	icon = th_privilege_third_eye
	land_share = 0
	max_absolutism = 5
	loyalty = 0.05
	influence = 0.05
	is_valid = {
		th_has_unlocked_privilege_no_tooltip = {
			estate_privilege = th_estate_yama_eternal_peace
		}
	}
	can_select = {}
	on_granted = {
		hig_enable_lecturing = yes
		hig_enable_enforce_gensokyan_peace = yes
		hig_enable_demand_unlawful_territory = yes
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1012
				}
			}
		}
	}
	on_revoked = {
		add_stability = -6
		hig_disable_lecturing = yes
		hig_disable_enforce_gensokyan_peace = yes
		hig_disable_demand_unlawful_territory = yes
	}
	on_invalid = {
		hig_disable_lecturing = yes
		hig_disable_enforce_gensokyan_peace = yes
		hig_disable_demand_unlawful_territory = yes
	}
	penalties = {
	}
	benefits = {
		legitimacy = 0.25
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

#Fourth reform tier
th_estate_yama_subjugate_gensokyo = {
	icon = privilege_dev_cost
	land_share = 0
	max_absolutism = 0
	loyalty = 0.15
	influence = 0.01
	is_valid = {
		has_country_flag = hig_passed_first_reform_finisher
		has_country_flag = hig_passed_second_reform_finisher
		has_country_flag = hig_passed_third_reform_finisher
		NOT = { has_country_flag = hig_passed_fourth_reform_finisher }
	}
	can_select = {
		estate_loyalty = {
			estate = estate_yama
			loyalty = 80
		}
	}
	on_granted = {
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -80
		}
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
				}
				country_event = {
					id = th_yama_authority_event.1013
				}
			}
		}
	}
	on_revoked = {
	}
	#on_invalid = {
	#}
	penalties = {
	}
	benefits = {
		legitimacy = 0.25
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}

th_estate_yama_unite_gensokyo = {	#Finisher of the fourth reform tier
	icon = th_privilege_third_eye
	land_share = 0
	max_absolutism = 15
	loyalty = 0.25
	influence = 0.05
	is_valid = {
		th_has_unlocked_privilege_no_tooltip = {
			estate_privilege = th_estate_yama_unite_gensokyo
		}
	}
	can_select = {}
	on_granted = {
		if = {
			limit = { NOT = { government_rank = 3 } }
			set_government_rank = 3
		}
		custom_tooltip = th_estate_yama_unite_gensokyo_tt
		hidden_effect = {
			every_known_country = {
				limit = {
					knows_country = ROOT
					NOT = {
						capital_scope = {
							continent = gensokyo_continent
						}
					}
				}
				country_event = {
					id = th_yama_authority_event.1014
				}
			}
			every_known_country = {
				limit = {
					capital_scope = {
						continent = gensokyo_continent
					}
				}
				country_event = {
					id = th_yama_authority_event.1015
				}
			}
		}
	}
	on_revoked = {
		add_stability = -6
	}
	on_invalid = {
		add_stability = -6
	}
	penalties = {
	}
	benefits = {
		governing_capacity_modifier = 0.2
	}
	#modifier_by_land_ownership = {
	#}
	#conditional_modifier = {
	#	trigger = { }
	#	modifier = { }
	#}
	#mechanics = {		
	#}
	#cooldown_years = x
	#on_cooldown_expires = {
	#}
	#can_revoke = { triggers }
	
	ai_will_do = {
		factor = 100
	}
}