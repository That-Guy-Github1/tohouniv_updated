Gensokyan_monarchy_legacy = {
	allow_normal_conversion = no
	icon = "english_monarchy"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		promote_culture_cost = -0.25
		num_accepted_cultures = 5
		culture_conversion_cost = -0.25	
		global_autonomy = -0.05
		governing_capacity = 150
	}

	ai = {
		factor = 5
	}
}

Gensokyan_monarchy = {
	lock_level_when_selected = yes
	icon = "english_monarchy"
	allow_normal_conversion = no
	potential = {
		OR = {
			culture_group = Gensokyan_culture
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_monarchy
			}
		}
	}
	legacy_equivalent = Gensokyan_monarchy_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		global_unrest = -1
		promote_culture_cost = -0.25
		num_accepted_cultures = 5
		culture_conversion_cost = -0.25	
		global_autonomy = -0.05
		governing_capacity = 150
	}
}

Gensokyan_republic_legacy = {
	icon = "merchant"
	allow_normal_conversion = no
	legacy_government = yes
	valid_for_new_country = no

	duration = 4

	allow_convert = no

	republican_name = no
	royal_marriage = no

	valid_for_nation_designer = yes
	nation_designer_cost = 20

	republic = yes
	modifiers = {
		global_unrest = -1
		diplomatic_reputation = 1
		trade_efficiency = 0.2
		global_tax_modifier = 0.05	
		governing_capacity = 150
		max_absolutism = -40
	}

	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}

	ai = {
		factor = 5
	}
}

Gensokyan_republic = {
	icon = "merchant"
	allow_normal_conversion = no
	potential = {
		OR = {
			culture_group = Gensokyan_culture
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_republic
			}
		}
	}
	legacy_equivalent = Gensokyan_republic_legacy
	valid_for_nation_designer = yes
	nation_designer_cost = 20
	royal_marriage = no

	modifiers = {
		global_unrest = -1
		diplomatic_reputation = 1
		trade_efficiency = 0.2 
		global_tax_modifier = 0.05
		governing_capacity = 150
		max_absolutism = -40
	}

	removed_effect = {
		if = {
			# Monarchs seize power
			limit = { government = monarchy }
			country_event = { id = dutch_republic.33 }
		}
	}

	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
	}
	duration = 4
}

Gensokyan_shrine_theocracy_legacy = {
	allow_normal_conversion = no
	icon = "shrine_theocracy_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40
	royal_marriage = yes
	queen = yes 
	heir = yes 
	rulers_can_be_generals = yes 
	heirs_can_be_generals = yes 
	
	modifiers = {
		governing_capacity = 200
		prestige = 1.5
		global_missionary_strength = 0.03
		papal_influence = 0.5
		church_power_modifier = 0.5 
		monthly_fervor_increase = 1 
		enforce_religion_cost = -0.5 
		global_autonomy = -0.05
		tolerance_own = 2
	}

	custom_attributes = {
		enables_call_to_defensive_war = yes
	}

	ai = {
		factor = 0
	}
}

Gensokyan_shrine_theocracy = {
	lock_level_when_selected = yes
	icon = "shrine_theocracy_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			has_reform = Gensokyan_shrine_theocracy
			have_had_reform = Gensokyan_shrine_theocracy
		}
	}
	legacy_equivalent = Gensokyan_shrine_theocracy_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	royal_marriage = yes
	queen = yes 
	heir = yes  
	rulers_can_be_generals = yes 
	heirs_can_be_generals = yes 
	
	modifiers = {
		governing_capacity = 200
		prestige = 1.5
		global_missionary_strength = 0.03
		papal_influence = 0.5
		church_power_modifier = 0.5 
		monthly_fervor_increase = 1 
		enforce_religion_cost = -0.5 
		global_autonomy = -0.05
		tolerance_own = 2
	}

	custom_attributes = {
		enables_call_to_defensive_war = yes
	}
}

Gensokyan_fairy_government_legacy = {
	allow_normal_conversion = no
	icon = "fairy_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no
	#allow_migration = yes
	native_mechanic = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	tribal = yes 
	modifiers = {
		manpower_recovery_speed = 0.2
		unjustified_demands = -0.2 
		fabricate_claims_cost= -0.15
		stability_cost_modifier = 0.15
		governing_capacity = 50
		max_absolutism = -50
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		enables_aristocratic_idea_group = no
	}

	ai = {
		factor = 5
	}
}

Gensokyan_fairy_government = {
	lock_level_when_selected = yes
	icon = "fairy_government_reform"
	allow_normal_conversion = no
	#allow_migration = yes
	native_mechanic = no
	potential = {
		OR = {
			primary_culture = Fairy
			have_had_reform = Gensokyan_fairy_government
		}
	}
	legacy_equivalent = Gensokyan_fairy_government_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	tribal = yes 
	
	modifiers = {
		manpower_recovery_speed = 0.2
		unjustified_demands = -0.2 
		fabricate_claims_cost= -0.15
		stability_cost_modifier = 0.15
		governing_capacity = 50
		max_absolutism = -50
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		enables_aristocratic_idea_group = no
	}
}

Gensokyan_clownpiece_tribal_government_legacy = {
	allow_normal_conversion = no
	icon = "clownpiece_tribal_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no
	#allow_migration = yes
	native_mechanic = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	tribal = yes 
	modifiers = {
		manpower_recovery_speed = 0.2
		unjustified_demands = -0.2
		land_maintenance_modifier = -0.2
		governing_capacity = 150
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		th_can_overload_provinces = yes
		th_own_provinces_go_berserk = yes
		enables_aristocratic_idea_group = no
		enables_natives_idea_group = yes
	}
	effect = {
		hidden_effect = {
			every_owned_province = {
				limit = {
					NOT = { nationalism = 1 }
					is_core = ROOT
					hellfairy_has_no_stack = yes
				}
				hellfairy_inititiate_berserk_stack = yes
			}
		}
	}
	post_removed_effect = {
		remove_country_modifier = th_hellfairy_provinces_to_overload
		every_owned_province = {
			limit = {
				has_province_modifier = th_province_overload
			}
			remove_province_modifier = th_province_overload
		}
	}

	ai = {
		factor = 5
	}
}

Gensokyan_clownpiece_tribal_government = {
	lock_level_when_selected = yes
	icon = "clownpiece_tribal_government_reform"
	allow_normal_conversion = no
	#allow_migration = yes
	native_mechanic = no
	potential = {
		OR = {
			th_is_or_was_tag = {
				tag = CLP
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_clownpiece_tribal_government
			}
		}
	}
	legacy_equivalent = Gensokyan_clownpiece_tribal_government_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	tribal = yes 
	
	modifiers = {
		manpower_recovery_speed = 0.2
		unjustified_demands = -0.2
		land_maintenance_modifier = -0.2
		governing_capacity = 150
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		th_can_overload_provinces = yes
		th_own_provinces_go_berserk = yes
		enables_aristocratic_idea_group = no
		enables_natives_idea_group = yes
	}
	effect = {
		hidden_effect = {
			every_owned_province = {
				limit = {
					NOT = { nationalism = 1 }
					is_core = ROOT
					hellfairy_has_no_stack = yes
				}
				hellfairy_inititiate_berserk_stack = yes
			}
		}
	}
	post_removed_effect = {
		remove_country_modifier = th_hellfairy_provinces_to_overload
		every_owned_province = {
			limit = {
				has_province_modifier = th_province_overload
			}
			remove_province_modifier = th_province_overload
		}
	}
}

Gensokyan_cirno_kingdom_government_legacy = {
	allow_normal_conversion = no
	icon = "cirno_kingdom_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no
	allow_migration = yes
	native_mechanic = no

	valid_for_nation_designer = yes
	nation_designer_cost = 50
	maintain_dynasty = yes 
	modifiers = {
		governing_capacity = 150
		land_forcelimit_modifier = 0.25
		unjustified_demands = -0.2
		ae_impact = -0.05
		max_absolutism = 20
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		enables_aristocratic_idea_group = no
		enables_horde_idea_group = yes
	}

	conditional = {
		allow = { has_dlc = "Cradle of Civilization" }
		government_abilities = {
			mamluk_mechanic
		}
	}

	ai = {
		factor = 5
	}
}

Gensokyan_cirno_kingdom_government = {
	lock_level_when_selected = yes
	icon = "cirno_kingdom_reform"
	allow_normal_conversion = no
	allow_migration = yes
	native_mechanic = no
	potential = {
		OR = {
			th_is_or_was_tag = {
				tag = CIN
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_cirno_kingdom_government
			}
		}
	}
	legacy_equivalent = Gensokyan_cirno_kingdom_government_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 50
	maintain_dynasty = yes 
	
	modifiers = {
		governing_capacity = 150
		land_forcelimit_modifier = 0.25
		unjustified_demands = -0.2
		ae_impact = -0.05
		max_absolutism = 20
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		enables_aristocratic_idea_group = no
		enables_horde_idea_group = yes
	}

	conditional = {
		allow = { has_dlc = "Cradle of Civilization" }
		government_abilities = {
			mamluk_mechanic
		}
	}
}

Gensokyan_lily_colonial_empire_legacy = {
	allow_normal_conversion = no
	icon = "lily_colonial_empire_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 60

	monarchy = yes
	modifiers = {
		governing_capacity = 150
		naval_forcelimit_modifier = 0.2
		stability_cost_modifier = -0.15
		num_accepted_cultures = 5
		land_forcelimit_modifier = 0.15
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		enables_fairy_bloom = yes
		enables_aristocratic_idea_group = yes
	}
	removed_effect = {
		hidden_effect = {
			remove_country_modifier = th_colonial_stability_minus_3
			remove_country_modifier = th_colonial_stability_minus_2
			remove_country_modifier = th_colonial_stability_minus_1
			remove_country_modifier = th_colonial_stability_1
			remove_country_modifier = th_colonial_stability_2
			remove_country_modifier = th_colonial_stability_3
		}
	}
	
	ai = {
		factor = 100
	}
}

Gensokyan_lily_colonial_empire = {
	lock_level_when_selected = yes
	icon = "lily_colonial_empire_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			th_is_or_was_tag = {
				tag = LIL
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_lily_colonial_empire
			}
		}
	}
	legacy_equivalent = Gensokyan_lily_colonial_empire_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 60

	conditional = {
		allow = {
			has_dlc = "Res Publica"
		}
		can_use_trade_post = yes
	}
	modifiers = {
		governing_capacity = 150
		naval_forcelimit_modifier = 0.2
		stability_cost_modifier = -0.15
		num_accepted_cultures = 5
		land_forcelimit_modifier = 0.15
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		enables_fairy_bloom = yes
		enables_aristocratic_idea_group = yes
	}
	removed_effect = {
		hidden_effect = {
			remove_country_modifier = th_colonial_stability_minus_3
			remove_country_modifier = th_colonial_stability_minus_2
			remove_country_modifier = th_colonial_stability_minus_1
			remove_country_modifier = th_colonial_stability_1
			remove_country_modifier = th_colonial_stability_2
			remove_country_modifier = th_colonial_stability_3
		}
	}

	ai = {
		factor = 100
	}
}

Gensokyan_tfr_pirate_government_legacy = {
	icon = "tfr_pirate_government_reform"
	allow_normal_conversion = no
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no
	republic = yes
	allow_migration = yes
	lock_level_when_selected = yes

	duration = 4

	allow_convert = no

	republican_name = no
	royal_marriage = yes 
	can_form_trade_league = no

	valid_for_nation_designer = yes
	nation_designer_cost = 20
	modifiers = {
		governing_capacity = 100
		max_absolutism = -10 
		naval_forcelimit_modifier = 0.5
		capture_ship_chance = 0.33
		may_perform_slave_raid_on_same_religion = yes
	}

	custom_attributes = {
		locked_government_type = yes
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
		has_fairy_pirate_estate = yes
		force_admiral_leader = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_tfr_pirate_government = {
	icon = "tfr_pirate_government_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			AND = {
				th_is_or_was_tag = {
					tag = TFR
				}
				primary_culture = Fairy
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_tfr_pirate_government
			}
		}
	}
	legacy_equivalent = Gensokyan_tfr_pirate_government_legacy
	valid_for_nation_designer = yes
	nation_designer_cost = 20
	allow_convert = no
	republic = yes
	duration = 4
	allow_migration = yes
	lock_level_when_selected = yes
	
	republican_name = no
	royal_marriage = yes 

	modifiers = {
		governing_capacity = 100
		max_absolutism = -10 
		naval_forcelimit_modifier = 0.5
		capture_ship_chance = 0.33
		may_perform_slave_raid_on_same_religion = yes
	}

	custom_attributes = {
		locked_government_type = yes
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
		has_fairy_pirate_estate = yes
		force_admiral_leader = yes
	}
}

Gensokyan_lrv_divine_government_legacy = {
	allow_normal_conversion = no
	icon = "lrv_divine_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	modifiers = {
		legitimacy = -1.25
		land_maintenance_modifier = -0.15
		global_regiment_recruit_speed = -0.15
		tolerance_own = 1
		land_forcelimit_modifier = 0.15
		governing_capacity = 150
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		th_divine_legitimacy_mechanic = yes
		th_increased_power_from_own_deity = yes
		enables_aristocratic_idea_group = no
		enables_divine_idea_group = yes
	}
	effect = {
		hidden_effect = {
			th_ds_set_deity_buff_up = yes
		}
	}
	maintain_dynasty = yes 
	
	different_religion_acceptance = -20
	different_religion_group_acceptance = -50

	ai = {
		factor = 5
	}
}

Gensokyan_lrv_divine_government = {
	lock_level_when_selected = yes
	icon = "lrv_divine_government_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_lrv_divine_government
			}
			AND = {
				th_is_or_was_tag = {
					tag = LRV
				}
				primary_culture = Fairy
			}
		}
	}
	legacy_equivalent = Gensokyan_lrv_divine_government_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40

	modifiers = {
		legitimacy = -1.25
		land_maintenance_modifier = -0.15
		global_regiment_recruit_speed = -0.15
		tolerance_own = 1
		land_forcelimit_modifier = 0.15
		governing_capacity = 150
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
		th_divine_legitimacy_mechanic = yes
		th_increased_power_from_own_deity = yes
		enables_aristocratic_idea_group = no
		enables_divine_idea_group = yes
	}
	effect = {
		hidden_effect = {
			th_ds_set_deity_buff_up = yes
		}
	}
	maintain_dynasty = yes 
	
	different_religion_acceptance = -20
	different_religion_group_acceptance = -50
}

Gensokyan_monarchy_fairy_government_legacy = {
	allow_normal_conversion = no
	icon = "monarchy_fairy_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes 
	modifiers = {
		manpower_recovery_speed = 0.2
		unjustified_demands = -0.2 
		fabricate_claims_cost= -0.15
		governing_capacity = 150
		max_absolutism = 20
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_monarchy_fairy_government = {
	lock_level_when_selected = yes
	icon = "monarchy_fairy_government_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			primary_culture = Fairy
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_monarchy_fairy_government
			}
		}
	}
	legacy_equivalent = Gensokyan_monarchy_fairy_government_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	monarchy = yes 
	
	modifiers = {
		manpower_recovery_speed = 0.2
		unjustified_demands = -0.2 
		fabricate_claims_cost= -0.15
		governing_capacity = 150
		max_absolutism = 20
	}

	custom_attributes = {
		fairy_respawn_mechanic = yes
	}
}

Gensokyan_republic_fairy_government_legacy = {
	icon = "fairy_government_reform"
	allow_normal_conversion = no
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no
	republic = yes

	duration = 4

	allow_convert = no

	republican_name = no
	royal_marriage = yes 

	valid_for_nation_designer = yes
	nation_designer_cost = 20
	modifiers = {
		manpower_recovery_speed = 0.2
		unjustified_demands = -0.2 
		fabricate_claims_cost= -0.15
		stability_cost_modifier = -0.1
		governing_capacity = 150
		max_absolutism = -10
		republican_tradition = 0.5 
	}

	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
		lottery_election = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_republic_fairy_government = {
	icon = "fairy_government_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			primary_culture = Fairy
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_republic_fairy_government
			}
		}
	}
	legacy_equivalent = Gensokyan_republic_fairy_government_legacy
	valid_for_nation_designer = yes
	nation_designer_cost = 20
	allow_convert = no
	republic = yes
	
	republican_name = no
	royal_marriage = yes 

	modifiers = {
		manpower_recovery_speed = 0.2
		unjustified_demands = -0.2 
		fabricate_claims_cost= -0.15
		stability_cost_modifier = -0.1
		governing_capacity = 150
		max_absolutism = -10
		republican_tradition = 0.5 
	}

	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
		lottery_election = yes
	}
	duration = 4
}

Gensokyan_ghost_realm_legacy = {
	allow_normal_conversion = no
	icon = "ghost_realm_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40
	
	modifiers = {
		global_unrest = -1
		culture_conversion_cost = -0.33	
		global_autonomy = -0.1
		governing_capacity = 200
		hostile_attrition = 1
		shock_damage_received = -0.1
		global_spy_defence = 0.2
	}

	ai = {
		factor = 5
	}
}

Gensokyan_ghost_realm = {
	lock_level_when_selected = yes
	icon = "ghost_realm_reform"
	allow_normal_conversion = no
	potential = {
		have_had_reform = Gensokyan_ghost_realm
	}
	legacy_equivalent = Gensokyan_ghost_realm_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	
	modifiers = {
		global_unrest = -1
		culture_conversion_cost = -0.33	
		global_autonomy = -0.1
		governing_capacity = 200
		hostile_attrition = 1
		shock_damage_received = -0.1
		global_spy_defence = 0.2
	}
}

Gensokyan_ghost_monarchy_legacy = {
	allow_normal_conversion = no
	icon = "ghost_monarchy_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	maintain_dynasty = yes 
	
	modifiers = {
		global_autonomy = -0.1
		governing_capacity = 200
		num_accepted_cultures = 5
		promote_culture_cost = -0.5
		years_of_nationalism = 5
		hostile_attrition = 1
	}

	custom_attributes = {
		enables_yuyukos_food_hunt = yes
		th_mortal_policies = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_ghost_monarchy = {
	lock_level_when_selected = yes
	icon = "ghost_monarchy_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			th_is_or_was_tag = {
				tag = NET
			}
			have_had_reform = Gensokyan_ghost_monarchy
		}
	}
	legacy_equivalent = Gensokyan_ghost_monarchy_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40

	maintain_dynasty = yes 
	
	modifiers = {
		global_autonomy = -0.1
		governing_capacity = 200
		num_accepted_cultures = 5
		promote_culture_cost = -0.5
		years_of_nationalism = 5
		hostile_attrition = 1
	}

	custom_attributes = {
		enables_yuyukos_food_hunt = yes
		th_mortal_policies = yes
	}
}

Gensokyan_kaguya_states_reform_legacy = {
	allow_normal_conversion = no
	icon = "kaguya_states_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = no

	modifiers = {
		global_autonomy = -0.05
		governing_capacity = 200
	}

	queen = yes
	heir = yes
	duration = 0
	has_term_election = no
	states_general_mechanic = {
		gnk_foe_mokou_statists = {
			discipline = 0.05
			land_morale = 0.1
			fire_damage = 0.1
			stability_cost_modifier = 0.1
			legitimacy = -2
		}

		gnk_own_kaguya_monarchists = {
			improve_relation_modifier = 0.25
			global_institution_spread = 0.15
			stability_cost_modifier = -0.1
		}
	}

	ai = {
		factor = 5
	}
}

Gensokyan_kaguya_states_reform = {
	allow_normal_conversion = no
	lock_level_when_selected = yes
	icon = "kaguya_states_reform"
	valid_for_new_country = no
	allow_convert = no
	potential = {
		OR = {
			th_is_or_was_tag = {
				tag = EIT
			}
			have_had_reform = Gensokyan_kaguya_states_reform
		}
	}
	legacy_equivalent = Gensokyan_kaguya_states_reform_legacy

	valid_for_nation_designer = no

	modifiers = {
		global_autonomy = -0.05
		governing_capacity = 200
	}

	queen = yes
	heir = yes
	duration = 0
	has_term_election = no
	states_general_mechanic = {
		gnk_foe_mokou_statists = {
			discipline = 0.05
			land_morale = 0.1
			fire_damage = 0.1
			stability_cost_modifier = 0.1
			legitimacy = -2
		}

		gnk_own_kaguya_monarchists = {
			improve_relation_modifier = 0.25
			global_institution_spread = 0.15
			stability_cost_modifier = -0.1
		}
	}

	ai = {
		factor = 5
	}
}

Gensokyan_mokou_states_reform_legacy = {
	allow_normal_conversion = no
	icon = "mokou_states_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = no

	modifiers = {
		global_autonomy = -0.05
		governing_capacity = 200
	}

	queen = yes
	heir = yes
	duration = 0
	has_term_election = no
	states_general_mechanic = {
		gnk_foe_kaguya_statists = {
			improve_relation_modifier = 0.25
			diplomatic_reputation = 2
			stability_cost_modifier = 0.1
			legitimacy = -2
		}

		gnk_own_mokou_monarchists = {			
			discipline = 0.05
			land_morale = 0.1
			fire_damage = 0.1
			stability_cost_modifier = -0.1
		}
	}

	ai = {
		factor = 5
	}
}

Gensokyan_mokou_states_reform = {
	allow_normal_conversion = no
	lock_level_when_selected = yes
	icon = "mokou_states_reform"
	valid_for_new_country = no
	allow_convert = no
	potential = {
		OR = {
			th_is_or_was_tag = {
				tag = FUJ
			}
			have_had_reform = Gensokyan_mokou_states_reform
		}
	}
	legacy_equivalent = Gensokyan_mokou_states_reform_legacy

	valid_for_nation_designer = no

	modifiers = {
		global_autonomy = -0.05
		governing_capacity = 200
	}

	queen = yes
	heir = yes
	duration = 0
	has_term_election = no
	states_general_mechanic = {
		gnk_foe_kaguya_statists = {
			improve_relation_modifier = 0.25
			diplomatic_reputation = 2
			stability_cost_modifier = 0.1
			legitimacy = -2
		}

		gnk_own_mokou_monarchists = {			
			discipline = 0.05
			land_morale = 0.1
			fire_damage = 0.1
			stability_cost_modifier = -0.1
		}
	}

	ai = {
		factor = 5
	}
}

Lunarian_monarchy_legacy = {
	icon = "lunarian_monarchy_reform"
	allow_normal_conversion = no
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = no

	monarchy = yes
	modifiers = {
		global_unrest = -1
		max_absolutism = 25
		yearly_absolutism = 0.1
		global_autonomy = -0.075
		governing_capacity = 300
	}

	custom_attributes = {
		enables_lunarian_rabbits = yes
	}

	ai = {
		factor = 0
	}
}

Lunarian_monarchy = {
	lock_level_when_selected = yes
	icon = "lunarian_monarchy_reform"
	allow_normal_conversion = no
	potential = {
		have_had_reform = Lunarian_monarchy
	}
	legacy_equivalent = Lunarian_monarchy_legacy
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = no

	monarchy = yes
	modifiers = {
		global_unrest = -1
		max_absolutism = 25
		yearly_absolutism = 0.1
		global_autonomy = -0.075
		governing_capacity = 300
	}

	custom_attributes = {
		enables_lunarian_rabbits = yes
	}
}

Gensokyan_divine_state_legacy = {
	allow_normal_conversion = no
	icon = "divine_state_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		tolerance_own = 2
		tolerance_heretic = -2
		tolerance_heathen = -2
		max_absolutism = 10
		church_power_modifier = 0.5
		monthly_fervor_increase = 0.5
		governing_capacity = 300
		legitimacy = -1.25
	}

	custom_attributes = {
		th_divine_legitimacy_mechanic = yes
		th_increased_power_from_own_deity = yes
		enables_aristocratic_idea_group = no
		enables_divine_idea_group = yes
	}
	effect = {
		hidden_effect = {
			th_ds_set_deity_buff_up = yes
		}
	}
	maintain_dynasty = yes 
	
	different_religion_acceptance = -20
	different_religion_group_acceptance = -50

	ai = {
		factor = 5
	}
}

Gensokyan_divine_state = {
	lock_level_when_selected = yes
	icon = "divine_state_reform"
	allow_normal_conversion = no
	potential = {
		have_had_reform = Gensokyan_divine_state
	}
	legacy_equivalent = Gensokyan_divine_state_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		tolerance_own = 2
		tolerance_heretic = -2
		tolerance_heathen = -2
		max_absolutism = 10
		church_power_modifier = 0.5
		monthly_fervor_increase = 0.5
		governing_capacity = 300
		legitimacy = -1.25
	}

	custom_attributes = {
		th_divine_legitimacy_mechanic = yes
		th_increased_power_from_own_deity = yes
		enables_aristocratic_idea_group = no
		enables_divine_idea_group = yes
	}
	effect = {
		hidden_effect = {
			th_ds_set_deity_buff_up = yes
		}
	}
	maintain_dynasty = yes 
	
	different_religion_acceptance = -20
	different_religion_group_acceptance = -50
}

Gensokyan_celestial_empire_legacy = {
	allow_normal_conversion = no
	icon = "th_celestial_empire_reform"
	legacy_government = yes

	allow_force_tributary = no

	valid_for_new_country = no
	valid_for_nation_designer = no
	allow_convert = no

	monarchy = yes
	modifiers = {
		global_unrest = -1
		promote_culture_cost = -0.25
		num_accepted_cultures = 5
		culture_conversion_cost = -0.25	
		global_autonomy = -0.05
		governing_capacity = 300

		prestige = 0.5
	}

	factions = {
		temples
		enuchs
		bureaucrats
	}

    fixed_rank = 3
	maintain_dynasty = yes
	
	custom_attributes = {
		has_tributaries = yes
	}
	
	conditional = {
		allow = { has_dlc = "Mandate of Heaven" }
		has_meritocracy = yes
		factions = {}
	}

	ai = {
		factor = 5
	}
}

Gensokyan_celestial_empire = {
	lock_level_when_selected = yes
	icon = "th_celestial_empire_reform"
	potential = {
		culture_group = Gensokyan_culture
		is_emperor_of_china = yes 
		NOT = { has_global_flag = empire_of_china_dismantled }
	}
	legacy_equivalent = Gensokyan_celestial_empire_legacy

	allow_force_tributary = no
	
	valid_for_new_country = no
	valid_for_nation_designer = no
	allow_convert = no

	modifiers = {
		global_unrest = -1
		promote_culture_cost = -0.25
		num_accepted_cultures = 5
		culture_conversion_cost = -0.25	
		global_autonomy = -0.05
		governing_capacity = 300

		prestige = 0.5
	}

	factions = {
		temples
		enuchs
		bureaucrats
	}

	fixed_rank = 3
	maintain_dynasty = yes
	
	custom_attributes = {
		locked_government_type = yes
		has_tributaries = yes
	}

	conditional = {
		allow = { has_dlc = "Mandate of Heaven" }
		has_meritocracy = yes
		factions = {}
	}
}

Gensokyan_scr_scarlet_monarchy_legacy = {
	allow_normal_conversion = no
	icon = "scarlet_monarchy_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		yearly_global_trust_growth = 0.01
		prestige = 0.5
		diplomatic_upkeep = 1
		global_autonomy = -0.05
		governing_capacity = 150
	}

	custom_attributes = {
		enables_scarlet_bloodlust = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_scr_scarlet_monarchy = {
	lock_level_when_selected = yes
	icon = "scarlet_monarchy_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			AND = {
				th_is_or_was_tag = {
					tag = SCR
				}
				OR = {
					has_reform = Gensokyan_scr_scarlet_monarchy
					have_had_reform = Gensokyan_scr_scarlet_monarchy
				}
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_scr_scarlet_monarchy
			}
		}
	}
	legacy_equivalent = Gensokyan_scr_scarlet_monarchy_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		global_unrest = -1
		yearly_global_trust_growth = 0.01
		prestige = 0.5
		diplomatic_upkeep = 1
		global_autonomy = -0.05
		governing_capacity = 150
	}

	custom_attributes = {
		enables_scarlet_bloodlust = yes
	}
}

Gensokyan_mhg_puppet_master_legacy = {
	allow_normal_conversion = no
	icon = "yukari_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		diplomats = 1
		march_slots = 0.02
		mercenary_discipline = 0.1
		unjustified_demands = -0.5
		subject_war_exhaustion = 0.03
		global_autonomy = -0.05
	}

	custom_attributes = {
		enables_yukaris_shogunate = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_mhg_puppet_master = {
	lock_level_when_selected = yes
	icon = "yukari_government_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			OR = {
				has_reform = Gensokyan_mhg_puppet_master
				have_had_reform = Gensokyan_mhg_puppet_master
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_mhg_puppet_master
			}
		}
	}
	legacy_equivalent = Gensokyan_mhg_puppet_master_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40

	maintain_dynasty = yes
	allow_vassal_war = yes
	allow_vassal_alliance = yes
	
	modifiers = {
		diplomats = 1
		march_slots = 0.02
		mercenary_discipline = 0.1
		unjustified_demands = -0.5
		subject_war_exhaustion = 0.03
		global_autonomy = -0.05
	}

	custom_attributes = {
		enables_yukaris_shogunate = yes
	}
	
	ai = {
		factor = 100
	}
}

Gensokyan_crd_satori_monarchy_legacy = {
	allow_normal_conversion = no
	icon = "satori_monarchy_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		vassal_upkeep = 0.03
		liberty_desire_from_subject_development = -0.25
		spy_offence = 0.2
		governing_capacity = 150
	}

	custom_attributes = {
		enables_satori_subjects = yes
		enables_satori_subject_interactions = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_crd_satori_monarchy = {
	lock_level_when_selected = yes
	icon = "satori_monarchy_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			AND = {
				th_is_or_was_tag = {
					tag = CRD
				}
				OR = {
					has_reform = Gensokyan_crd_satori_monarchy
					have_had_reform = Gensokyan_crd_satori_monarchy
				}
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_crd_satori_monarchy
			}
		}
	}
	legacy_equivalent = Gensokyan_crd_satori_monarchy_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		vassal_upkeep = 0.03
		liberty_desire_from_subject_development = -0.25
		spy_offence = 0.2
		governing_capacity = 150
	}

	custom_attributes = {
		enables_satori_subjects = yes
		enables_satori_subject_interactions = yes
	}
}

Gensokyan_kmj_travelling_kingdom_legacy = {
	allow_normal_conversion = no
	icon = "travelling_kingdom_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no
	native_mechanic = no
	allow_migration = yes

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		development_cost = -0.15
		enemy_core_creation = 1
		build_cost = -0.5
		build_time = -0.5
		diplomats = 1
	}

	custom_attributes = {
		enables_migration_through_countries = yes
		enables_development_transfer = yes
		disables_settled_property = yes
		enables_claim_immunity = yes
		disables_subject_annexation = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_kmj_travelling_kingdom = {
	lock_level_when_selected = yes
	icon = "travelling_kingdom_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			AND = {
				th_is_or_was_tag = {
					tag = KMJ
				}
				OR = {
					has_reform = Gensokyan_kmj_travelling_kingdom
					have_had_reform = Gensokyan_kmj_travelling_kingdom
				}
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_kmj_travelling_kingdom
			}
		}
	}
	legacy_equivalent = Gensokyan_kmj_travelling_kingdom_legacy
	valid_for_new_country = no
	valid_for_nation_designer = no
	native_mechanic = no
	allow_migration = yes

	monarchy = yes
	modifiers = {
		development_cost = -0.15
		enemy_core_creation = 1
		build_cost = -0.5
		build_time = -0.5
		diplomats = 1
		global_regiment_recruit_speed = -0.75
	}

	custom_attributes = {
		enables_migration_through_countries = yes
		enables_development_transfer = yes
		disables_settled_property = yes
		enables_claim_immunity = yes
		disables_subject_annexation = yes
	}
}

Gensokyan_fom_witch_government_legacy = {
	allow_normal_conversion = no
	icon = "witch_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		land_morale = 0.05
		global_autonomy = -0.05
		governing_capacity = 150
	}

	raze_province = yes

	ai = {
		factor = 5
	}
}

Gensokyan_fom_witch_government = {
	lock_level_when_selected = yes
	icon = "witch_government_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			AND = {
				th_is_or_was_tag = {
					tag = FOM
				}
				OR = {
					has_reform = Gensokyan_fom_witch_government
					have_had_reform = Gensokyan_fom_witch_government
				}
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_fom_witch_government
			}
		}
	}
	legacy_equivalent = Gensokyan_fom_witch_government_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		global_unrest = -1
		land_morale = 0.05
		global_autonomy = -0.05
		governing_capacity = 150
	}

	raze_province = yes
}

Gensokyan_hig_yama_government_legacy = {
	allow_normal_conversion = no
	icon = "yama_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = no

	monarchy = yes
	modifiers = {
		global_unrest = -1
		monthly_favor_modifier = 0.25
		diplomats = 1
		global_autonomy = -0.05
		diplomatic_upkeep = 1
	}

	custom_attributes = {
		enables_yama_authority = yes
		locked_government_type = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_hig_yama_government = {
	lock_level_when_selected = yes
	icon = "yama_government_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			AND = {
				th_is_or_was_tag = {
					tag = HIG
				}
				OR = {
					has_reform = Gensokyan_hig_yama_government
					have_had_reform = Gensokyan_hig_yama_government
				}
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_hig_yama_government
			}
		}
	}
	legacy_equivalent = Gensokyan_hig_yama_government_legacy
	valid_for_new_country = no
	valid_for_nation_designer = no
	modifiers = {
		global_unrest = -1
		monthly_favor_modifier = 0.25
		diplomats = 1
		global_autonomy = -0.05
		diplomatic_upkeep = 1
	}

	custom_attributes = {
		enables_yama_authority = yes
		locked_government_type = yes
	}
}

Gensokyan_sff_sword_of_nature_legacy = {
	allow_normal_conversion = no
	icon = "witch_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no
	maintain_dynasty = yes
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		army_tradition_decay = -0.03
		drill_decay_modifier = -0.25
		discipline = 0.05
		governing_capacity = 250
	}

	conditional = {
		allow = { has_dlc = "Third Rome" }
		government_abilities = {
			russian_mechanic
		}
	}

	raze_province = yes

	ai = {
		factor = 5
	}
}

Gensokyan_sff_sword_of_nature = {
	icon = "sff_sword_of_nature"
	allow_normal_conversion = no
	potential = {
		OR = {
			has_reform = Gensokyan_sff_sword_of_nature
			have_had_reform = Gensokyan_sff_sword_of_nature
		}
	}
	legacy_equivalent = Gensokyan_sff_sword_of_nature_legacy
	maintain_dynasty = yes
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	lock_level_when_selected = yes
	modifiers = {
		army_tradition_decay = -0.03
		drill_decay_modifier = -0.25
		discipline = 0.05
		governing_capacity = 250
	}

	conditional = {
		allow = { has_dlc = "Third Rome" }
		government_abilities = {
			russian_mechanic
		}
	}
	
	ai = {
		factor = 100
	}
}

Gensokyan_oni_underworld_clan_legacy = {
	allow_normal_conversion = no
	icon = "oni_clan_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no
	
	valid_for_nation_designer = yes
	nation_designer_cost = 20

	monarchy = yes
	modifiers = {
		battle_passion_per_regiment = -0.02
		monthly_battle_passion = -0.01
		governing_capacity = 50
		leader_land_shock = 1
		monarch_military_power = 2
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}
	fixed_rank = 1

	custom_attributes = {
		th_disable_respawn = yes
		th_legitimacy_through_battles = yes
		th_penalty_for_dishonor = yes
		th_has_battle_passion = yes
		th_has_questioned_legitimacy = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_oni_underworld_clan = {
	lock_level_when_selected = yes
	icon = "oni_clan_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			AND = {
				th_is_or_was_tag = {
					tag = ONI
				}
				OR = {
					has_reform = Gensokyan_oni_underworld_clan
					have_had_reform = Gensokyan_oni_underworld_clan
				}
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_oni_underworld_clan
			}
		}
	}
	legacy_equivalent = Gensokyan_oni_underworld_clan_legacy
	valid_for_new_country = no
	
	valid_for_nation_designer = yes
	nation_designer_cost = 20
	modifiers = {
		battle_passion_per_regiment = -0.02
		monthly_battle_passion = -0.01
		governing_capacity = 50
		leader_land_shock = 1
		monarch_military_power = 2
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}
	fixed_rank = 1

	custom_attributes = {
		th_disable_respawn = yes
		th_legitimacy_through_battles = yes
		th_penalty_for_dishonor = yes
		th_has_battle_passion = yes
		th_has_questioned_legitimacy = yes
	}
}

Gensokyan_oni_brawling_kingdom_legacy = {
	allow_normal_conversion = no
	icon = "oni_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no
	
	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		legitimacy = 0.5
		battle_passion_per_regiment = -0.02
		monthly_battle_passion = -0.01
		governing_capacity = 100
		leader_land_shock = 1
		monarch_military_power = 2
		free_mil_policy = 1
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
		th_legitimacy_through_battles = yes
		th_penalty_for_dishonor = yes
		th_has_battle_passion = yes
		th_has_improved_battle_passion = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_oni_brawling_kingdom = {
	lock_level_when_selected = yes
	icon = "oni_government_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			has_reform = Gensokyan_oni_brawling_kingdom
			have_had_reform = Gensokyan_oni_brawling_kingdom
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_oni_brawling_kingdom
			}
		}
	}
	legacy_equivalent = Gensokyan_oni_brawling_kingdom_legacy
	valid_for_new_country = no
	
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		legitimacy = 0.5
		battle_passion_per_regiment = -0.02
		monthly_battle_passion = -0.01
		governing_capacity = 100
		leader_land_shock = 1
		monarch_military_power = 2
		free_mil_policy = 1
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
		th_legitimacy_through_battles = yes
		th_penalty_for_dishonor = yes
		th_has_battle_passion = yes
		th_has_improved_battle_passion = yes
	}
}

Gensokyan_samurai_order_legacy = {
	allow_normal_conversion = no
	icon = "samurai_order_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		nobles_loyalty_modifier = 0.15
		nobles_influence_modifier = 0.1
		leader_cost = -0.15
		army_tradition = 0.5
		free_leader_pool = 2
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}
	
	custom_attributes = {
		th_can_convert_general_to_ruler = yes
		th_legitimacy_through_battles = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_samurai_order = {
	lock_level_when_selected = yes
	icon = "samurai_order_reform"
	allow_normal_conversion = no
	potential = {
		have_had_reform = Gensokyan_samurai_order
	}
	legacy_equivalent = Gensokyan_samurai_order_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		nobles_loyalty_modifier = 0.15
		nobles_influence_modifier = 0.1
		leader_cost = -0.15
		army_tradition = 0.5
		free_leader_pool = 2
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}
	
	custom_attributes = {
		th_can_convert_general_to_ruler = yes
		th_legitimacy_through_battles = yes
	}
}

Gensokyan_music_band_legacy = {
	allow_normal_conversion = no
	icon = "music_band_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_music_band = {
	lock_level_when_selected = yes
	icon = "music_band_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			has_country_flag = okr_has_enacted_music_band
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_music_band
			}
		}
	}
	legacy_equivalent = Gensokyan_music_band_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
		th_legitimacy_through_battles = yes
	}
}

Gensokyan_kpp_kappa_state_legacy = {
	allow_normal_conversion = no
	icon = "kappa_state_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_kpp_kappa_state = {
	lock_level_when_selected = yes
	icon = "kappa_state_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			has_country_flag = kpp_has_kappa_state
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_kpp_kappa_state
			}
			has_reform = Gensokyan_kpp_kappa_state
		}
	}
	legacy_equivalent = Gensokyan_kpp_kappa_state_legacy
	royal_marriage = yes
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	duration = 5
	modifiers = {
		global_autonomy = 0.1
		burghers_influence_modifier = 0.05
		burghers_loyalty_modifier = 0.2
		republican_tradition = -0.5
		max_terms = 0.02
		reform_progress_growth = -1
	}
	effect = {
		hidden_effect = {
			set_variable = {
				which = election_term
				value = 1
			}
			set_variable = {
				which = max_election_term
				value = 2
			}
		}
	}
	removed_effect = {
		hidden_effect = {
			set_variable = {
				which = election_term
				value = 1
			}
			remove_country_modifier = kpp_overcame_counter_movement_disaster
			remove_country_modifier = kpp_overcame_anti_teamwork_disaster
			remove_country_modifier = kpp_overcame_guild_wars_disaster
		}
	}
	republican_name = no

	custom_attributes = {
		th_has_kappa_elections = yes
		th_has_limited_terms = yes
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
		th_has_kappa_rebels = yes
	}
	conditional = {
		allow = { has_dlc = "Rule Britannia" }
		custom_attributes = {
			th_kappa_gadgets = yes
			th_innovativeness_from_elections = yes
			th_innovativeness_from_embracing_institutions = yes
		}
	}
}

Gensokyan_kpp_united_kappa_republic_legacy = {
	allow_normal_conversion = no
	icon = "kappa_state_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40
	royal_marriage = yes
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	duration = 5
	modifiers = {
		max_absolutism = 40
		republican_tradition = 1
		burghers_loyalty_modifier = 0.2
		development_cost = -0.1
	}

	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
		th_has_tinker_contests = yes
		th_has_tinker_elections_on_ruler_death = yes
	}
	conditional = {
		allow = { has_dlc = "Rule Britannia" }
		custom_attributes = {
			th_kappa_gadgets = yes
			th_innovativeness_from_embracing_institutions = yes
		}
	}

	ai = {
		factor = 5
	}
}

Gensokyan_kpp_united_kappa_republic = {
	lock_level_when_selected = yes
	icon = "kappa_state_reform"	#TODO
	allow_normal_conversion = no
	potential = {
		OR = {
			has_country_flag = kpp_has_kappa_state
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_kpp_united_kappa_republic
			}
			has_reform = Gensokyan_kpp_united_kappa_republic
		}
	}
	legacy_equivalent = Gensokyan_kpp_united_kappa_republic_legacy
	royal_marriage = yes
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	duration = 5
	modifiers = {
		max_absolutism = 40
		republican_tradition = 1
		burghers_loyalty_modifier = 0.2
		development_cost = -0.1
	}
	republican_name = no

	custom_attributes = {
		enables_plutocratic_idea_group = yes
		enables_aristocratic_idea_group = no
		th_has_tinker_contests = yes
		th_has_tinker_elections_on_ruler_death = yes
	}
	conditional = {
		allow = { has_dlc = "Rule Britannia" }
		custom_attributes = {
			th_kappa_gadgets = yes
			th_innovativeness_from_embracing_institutions = yes
		}
	}
}

Gensokyan_tgu_caste_system_legacy = {
	allow_normal_conversion = no
	icon = "tengu_state_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_tgu_caste_system = {
	lock_level_when_selected = yes
	icon = "tengu_state_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			has_country_flag = tgu_has_caste_system
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_tgu_caste_system
			}
		}
	}
	legacy_equivalent = Gensokyan_tgu_caste_system_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
		th_legitimacy_through_battles = yes
	}
}

Gensokyan_mim_mimas_empire_legacy = {
	allow_normal_conversion = no
	icon = "mimas_empire_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		monthly_splendor = 0.25
		danmaku_power_constant = 1
		global_autonomy = -0.05
		governing_capacity = 150
	}
	lock_level_when_selected = yes
	can_change_primary_culture = no

	custom_attributes = {
		th_has_spell_schools = yes
		locked_government_type = yes
	}
	removed_effect = {
		hidden_effect = {
			mim_forget_specialization = yes
			clr_country_flag = th_specialized_for_age_of_discovery
			clr_country_flag = th_specialized_for_age_of_reformation
			clr_country_flag = th_specialized_for_age_of_absolutism
			clr_country_flag = th_specialized_for_age_of_revolutions
			clr_country_flag = th_already_reskilled_age_of_discovery
			clr_country_flag = th_already_reskilled_age_of_reformation
			clr_country_flag = th_already_reskilled_age_of_absolutism
			clr_country_flag = th_already_reskilled_age_of_revolutions
		}
	}

	ai = {
		factor = 5
	}
}

Gensokyan_mim_mimas_empire = {
	icon = "mimas_empire_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			th_is_or_was_tag = {
				tag = MIM
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_mim_mimas_empire
			}
		}
	}
	legacy_equivalent = Gensokyan_mim_mimas_empire_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		monthly_splendor = 0.25
		danmaku_power_constant = 1
		global_autonomy = -0.05
		governing_capacity = 150
	}
	lock_level_when_selected = yes
	can_change_primary_culture = no

	custom_attributes = {
		th_has_spell_schools = yes
		locked_government_type = yes
	}
	removed_effect = {
		hidden_effect = {
			mim_forget_specialization = yes
			clr_country_flag = th_specialized_for_age_of_discovery
			clr_country_flag = th_specialized_for_age_of_reformation
			clr_country_flag = th_specialized_for_age_of_absolutism
			clr_country_flag = th_specialized_for_age_of_revolutions
			clr_country_flag = th_already_reskilled_age_of_discovery
			clr_country_flag = th_already_reskilled_age_of_reformation
			clr_country_flag = th_already_reskilled_age_of_absolutism
			clr_country_flag = th_already_reskilled_age_of_revolutions
		}
	}
}

Gensokyan_thr_engineer_society_legacy = {
	allow_normal_conversion = no
	icon = "engineer_society_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_thr_engineer_society = {
	lock_level_when_selected = yes
	icon = "engineer_society_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			has_country_flag = kpp_has_engineers
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_thr_engineer_society
			}
		}
	}
	legacy_equivalent = Gensokyan_thr_engineer_society_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
		th_legitimacy_through_battles = yes
	}
}

Gensokyan_yum_scientific_society_legacy = {
	allow_normal_conversion = no
	icon = "scientific_state_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
	}

	ai = {
		factor = 5
	}
}

Gensokyan_yum_scientific_society = {
	lock_level_when_selected = yes
	icon = "scientific_state_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			has_country_flag = kpp_has_science
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_yum_scientific_society
			}
		}
	}
	legacy_equivalent = Gensokyan_yum_scientific_society_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}
	effect = {
		hidden_effect = {
			if = {
				limit = { is_female = yes } 
				convert_female_ruler_to_general = 40
			}
			else = { convert_ruler_to_general = 40 }
		}
	}

	custom_attributes = {
		th_has_oni_succession = yes
		th_disable_respawn = yes
		th_legitimacy_through_battles = yes
	}
}

Gensokyan_snk_toyosatomimi_monarchy_legacy = {
	allow_normal_conversion = no
	icon = "toyosatomimi_kingdom_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}

	has_meritocracy = yes

	ai = {
		factor = 5
	}
}

Gensokyan_snk_toyosatomimi_monarchy = {
	lock_level_when_selected = yes
	icon = "toyosatomimi_kingdom_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			has_country_flag = snk_has_toyo_government
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_snk_toyosatomimi_monarchy
			}
		}
	}
	legacy_equivalent = Gensokyan_snk_toyosatomimi_monarchy_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		global_unrest = -1
		legitimacy = 0.5
		global_autonomy = -0.05
		governing_capacity = 150
	}

	has_meritocracy = yes
}

Gensokyan_myo_monastery_legacy = {
	allow_normal_conversion = no
	icon = "myo_monastery_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		global_unrest = -1
		diplomats = 1
		global_autonomy = -0.05
		governing_capacity = 150
	}

	ai = {
		factor = 5
	}
}

Gensokyan_myo_monastery = {
	lock_level_when_selected = yes
	icon = "myo_monastery_reform"
	allow_normal_conversion = no
	potential = {
		OR = {
			AND = {
				th_is_or_was_tag = {
					tag = MYO
				}
				OR = {
					has_reform = Gensokyan_myo_monastery
					have_had_reform = Gensokyan_myo_monastery
				}
			}
			AND = {
				is_playing_custom_nation = yes
				have_had_reform = Gensokyan_myo_monastery
			}
		}
	}
	legacy_equivalent = Gensokyan_myo_monastery_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		global_unrest = -1
		diplomats = 1
		global_autonomy = -0.05
		governing_capacity = 150
	}

	assimilation_cultures = {
		altaic = {
			artillery_cost = -0.1
		}
		baltic = {
			naval_forcelimit_modifier = 0.05
		}
		british = {
			ship_durability = 0.05
		}
		burman = {
			free_leader_pool = 1
		}
		byzantine = {
			legitimacy = 0.25
		}
		carpathian = {
			mercenary_cost = -0.1
		}
		caucasian = {
			mercenary_discipline = 0.05
		}
		gaelic = {
			shock_damage = 0.05
		}
		central_indic = {
			land_attrition = -0.1
		}
		east_asian = {
			state_maintenance_modifier = -0.2
		}
		kongo_group = {
			heir_chance = 0.5
		}
		cushitic = {
			missionaries = 1
		}
		dravidian = {
			global_trade_goods_size_modifier = 0.05
		}
		african = {
			global_tax_income = 10
		}
		east_slavic = {
			land_forcelimit_modifier = 0.1
		}
		eastern_aryan = {
			production_efficiency = 0.05
		}
		evenks = {
			cavalry_flanking = 0.2
		}
		french = {
			diplomats = 1
		}
		germanic = {
			global_institution_spread = 0.15
		}
		great_lakes_group = {
			loot_amount = 0.5
		}
		hindusthani = {
			core_creation = -0.1
		}
		iberian = {
			global_colonial_growth = 10
		}
		iranian = {
			advisor_cost = -0.1
		}
		japanese_g = {
			land_morale = 0.1
		}
		kamchatkan_g = {
			hostile_attrition = 1
		}
		korean_g = {
			idea_cost = -0.05
		}
		latin = {
			embracement_cost = -0.1
		}
		lost_cultures_group = {
			discipline = 0.05
		}
		turko_semitic = {
			cavalry_power = 0.1
		}
		maghrebi = {
			privateer_efficiency = 0.25
		}
		malay = {
			merchants = 1
		}
		mande = {
			tolerance_heretic = 1
		}
		pacific = {
			global_sailors_modifier = 0.1
		}
		sahelian = {
			movement_speed = 0.1
		}
		scandinavian = {
			mil_advisor_cost = -0.1
		}
		southeastasian_group = {
			development_cost = -0.05
		}
		south_slavic = {
			warscore_cost_vs_other_religion = -0.1
		}
		southern_african = {
			inflation_reduction = 0.05
		}
		sudanese = {
			caravan_power = 0.1
		}
		tartar = {
			cavalry_cost = -0.15
		}
		thai_group = {
			build_cost = -0.05
		}
		tibetan_group = {
			prestige_per_development_from_conversion = 0.5
		}
		finno_ugric = {
			prestige_decay = -0.01
		}
		west_african = {
			global_autonomy = -0.01
		}
		west_slavic = {
			leader_land_fire = 1
		}
		western_aryan = {
			trade_efficiency = 0.05
		}
		Gensokyan_culture = {
			fire_damage = 0.1 
		}
	}
}

#For submod
Gensokyan_vir_library_reform_legacy = {
	allow_normal_conversion = no
	icon = "witch_government_reform"
	legacy_government = yes
	valid_for_new_country = no
	allow_convert = no

	valid_for_nation_designer = yes
	nation_designer_cost = 40

	monarchy = yes
	modifiers = {
		governing_capacity_modifier = -0.99
		defensiveness = 0.75
		land_morale = 0.15
	}

	ai = {
		factor = 5
	}
}

Gensokyan_vir_library_reform = {
	lock_level_when_selected = yes
	icon = "witch_government_reform"
	allow_normal_conversion = no
	potential = {
		#th_is_or_was_tag = {
		#	tag = VIR
		#}
		have_had_reform = Gensokyan_vir_library_reform
	}
	legacy_equivalent = Gensokyan_vir_library_reform_legacy
	valid_for_new_country = no
	valid_for_nation_designer = yes
	nation_designer_cost = 40
	modifiers = {
		governing_capacity_modifier = -0.99
		defensiveness = 0.75
		land_morale = 0.15
	}
}