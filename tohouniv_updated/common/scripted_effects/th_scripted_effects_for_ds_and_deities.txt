#This file is for all submodders, who want to add new deities and new Divine State (called "ds" in file name) nations

###DEITY EFFECTS###
th_deity_war_penalty = {
	custom_tooltip = th_deity_war_penalty_tt
	hidden_effect = {
		set_country_flag = th_deity_penalty_active
	}
	if = {
		limit = { th_hkr_deity_at_war_with_hakurei = yes }
		add_country_modifier = {
			name = th_penalty_Hakurei_God_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_yukari = yes }
		add_country_modifier = {
			name = th_penalty_Yukari_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_hecatia = yes }
		add_country_modifier = {
			name = th_penalty_Hecatia_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_okina = yes }
		add_country_modifier = {
			name = th_penalty_Okina_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_larva = yes }
		add_country_modifier = {
			name = th_penalty_Larva_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_aki = yes }
		add_country_modifier = {
			name = th_penalty_Aki_Sisters_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_junko = yes }
		add_country_modifier = {
			name = th_penalty_Junko_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_kishin = yes }
		add_country_modifier = {
			name = th_penalty_Kishin_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_shinki = yes }
		add_country_modifier = {
			name = th_penalty_Shinki_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_keiki = yes }
		add_country_modifier = {
			name = th_penalty_Keiki_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_hina = yes }
		add_country_modifier = {
			name = th_penalty_Hina_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
	else_if = {
		limit = { th_hkr_deity_at_war_with_kutaka = yes }
		add_country_modifier = {
			name = th_penalty_Kutaka_modifier
			desc = th_penalty_modifier_desc
			duration = -1
		}
	}
}

th_deity_clear_penalty = {
	clr_country_flag = th_deity_penalty_active
	remove_country_modifier = th_penalty_Hakurei_God_modifier
	remove_country_modifier = th_penalty_Yukari_modifier
	remove_country_modifier = th_penalty_Hecatia_modifier
	remove_country_modifier = th_penalty_Okina_modifier
	remove_country_modifier = th_penalty_Larva_modifier
	remove_country_modifier = th_penalty_Aki_Sisters_modifier
	remove_country_modifier = th_penalty_Junko_modifier
	remove_country_modifier = th_penalty_Kishin_modifier
	remove_country_modifier = th_penalty_Shinki_modifier
	remove_country_modifier = th_penalty_Keiki_modifier
	remove_country_modifier = th_penalty_Hina_modifier
	remove_country_modifier = th_penalty_Kutaka_modifier
}

th_deity_remove_all_modifiers = {
	custom_tooltip = th_deity_remove_all_modifiers.tt
	hidden_effect = {
		remove_country_modifier = th_deity_huge_festieval
		remove_country_modifier = th_deity_shrine_maiden_training
		remove_country_modifier = th_deity_yukari_spies
		remove_country_modifier = th_deity_yukaris_isekai_quartet
		remove_country_modifier = th_deity_hecatia_to_hell_with_rebels
		remove_country_modifier = th_deity_earth_aspect
		remove_country_modifier = th_deity_moon_aspect
		remove_country_modifier = th_deity_otherworld_aspect
		remove_country_modifier = th_deity_fort_backdoors
		remove_country_modifier = th_deity_door_to_a_new_world
		remove_country_modifier = th_deity_colonial_dancing
		remove_country_modifier = th_deity_blessed_crops
		remove_country_modifier = th_deity_fertility_blessing
		remove_country_modifier = th_deity_junkos_fury
		remove_country_modifier = th_deity_legacy_of_china
		remove_country_modifier = th_deity_powerword_poverty
		remove_country_modifier = th_deity_powerword_shipwreck
		remove_country_modifier = th_deity_lunarian_wall
		remove_country_modifier = th_deity_makaien_architecture
		remove_country_modifier = th_deity_makaien_toxics
		remove_country_modifier = th_deity_rested_spirits
		remove_country_modifier = th_deity_the_army_mayumi
		remove_country_modifier = th_deity_expanding_fortune
		remove_country_modifier = th_deity_fortunate_intentions
		remove_country_modifier = th_deity_fortune_to_the_warriors
		remove_country_modifier = th_deity_war_misfortune		
		remove_country_modifier = th_deity_miracle_of_modernization
		remove_country_modifier = th_deity_more_shrine_maiden
		remove_country_modifier = th_deity_suwakos_connections
		remove_country_modifier = th_deity_creation_of_heaven
		remove_country_modifier = th_deity_kanakos_vassal_policy
		every_owned_province = {
			remove_province_modifier = th_deity_toxic_province
			remove_province_modifier = th_deity_youkai_extermination
			remove_province_modifier = th_deity_earthy_walls
			remove_province_modifier = th_deity_war_misfortune
		}
	}
}

###DIVINE STATE EFFECTS###
th_ds_set_deity_buff_up = {
	if = {	#Hakurei
		limit = {
			OR = {
				tag = HKR
				was_tag = HKR
				AND = {
					dynasty = "Hakurei"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_hakurei
	}
	else_if = {	#Yakumo
		limit = {
			OR = {
				tag = MHG
				was_tag = MHG
				AND = {
					dynasty = "Yakumo"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_yakumo
	}
	else_if = {	#Hecatia
		limit = {
			OR = {
				tag = HEC
				was_tag = HEC
				AND = {
					dynasty = "Lapislazuli"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_hecatia
	}
	else_if = {	#Okina
		limit = {
			OR = {
				tag = OKI
				was_tag = OKI
				AND = {
					dynasty = "Matara"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_okina
	}
	else_if = {	#Larva
		limit = {
			OR = {
				tag = LRV
				was_tag = LRV
				AND = {
					dynasty = "Larva"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_larva
	}
	else_if = {	#Aki
		limit = {
			OR = {
				tag = AKI
				was_tag = AKI
				AND = {
					dynasty = "Aki"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_aki
	}
	else_if = {	#Junko
		limit = {
			OR = {
				tag = JNK
				was_tag = JNK
				AND = {
					has_ruler = "Junko"
					dynasty = " "
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_junko
	}
	else_if = {	#Kishin
		limit = {
			OR = {
				tag = LCU
				was_tag = LCU
				AND = {
					dynasty = "Kishin"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_kishin
	}
	else_if = {	#Shinki
		limit = {
			OR = {
				tag = MKI
				was_tag = MKI
				AND = {
					dynasty = "of Makai"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_shinki
	}
	else_if = {	#Keiki
		limit = {
			OR = {
				tag = KEI
				was_tag = KEI
				AND = {
					dynasty = "Haniyasushin"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_keiki
	}
	else_if = {	#Hina
		limit = {
			OR = {
				tag = YOF
				was_tag = YOF
				AND = {
					dynasty = "Kagiyama"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_hina
	}
	else_if = {
		limit = {
			OR = {
				tag = GGS
				was_tag = GGS
				AND = {
					dynasty = "Niwatari"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_kutaka
	}
	else_if = {	#Kochiya
		limit = {
			OR = {
				tag = MRY
				was_tag = MRY
				AND = {
					dynasty = "Kochiya"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_kochiya
	}
	else_if = {	#Moriya
		limit = {
			OR = {
				tag = MRY
				was_tag = MRY
				AND = {
					dynasty = "Moriya"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_suwako
	}
	else_if = {	#Kanako
		limit = {
			OR = {
				tag = MRY
				was_tag = MRY
				AND = {
					dynasty = "Kanako"
					OR = {
						AND = {
							has_reform = Gensokyan_divine_state
							ruler_has_personality = immortal_personality
						}
						NOT = { has_reform = Gensokyan_divine_state }
					}
				}
			}
		}
		set_country_flag = th_ds_improved_deity
		set_country_flag = th_ds_improved_deity_for_kanako
	}
	else = {
		set_country_flag = th_ds_reduced_new_deity_cooldown
	}
	#Insert here your new else_if command for the new deity
}

th_ds_clear_improved_deity_flags = {
	clr_country_flag = th_ds_improved_deity
	clr_country_flag = th_ds_reduced_new_deity_cooldown
	clr_country_flag = th_ds_improved_deity_for_hakurei
	clr_country_flag = th_ds_improved_deity_for_yakumo
	clr_country_flag = th_ds_improved_deity_for_hecatia
	clr_country_flag = th_ds_improved_deity_for_okina
	clr_country_flag = th_ds_improved_deity_for_aki
	clr_country_flag = th_ds_improved_deity_for_shinki
	clr_country_flag = th_ds_improved_deity_for_kishin
	clr_country_flag = th_ds_improved_deity_for_hina
	clr_country_flag = th_ds_improved_deity_for_kutaka
	clr_country_flag = th_ds_improved_deity_for_larva
	clr_country_flag = th_ds_improved_deity_for_keiki
	clr_country_flag = th_ds_improved_deity_for_junko
	clr_country_flag = th_ds_improved_deity_for_suwako
	clr_country_flag = th_ds_improved_deity_for_kochiya
	clr_country_flag = th_ds_improved_deity_for_kanako
	#Insert below your newly added flag for an improved deity
}

th_ds_excuse_religion_swapping = {
	if = {
		limit = {
			has_government_attribute = th_divine_legitimacy_mechanic
		}
		custom_tooltip = th_ds_excuse_religion_swapping_tt
		hidden_effect = {
			set_country_flag = th_is_excused_to_change_religion
		}
	}
}
