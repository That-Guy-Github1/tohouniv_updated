#Adjust the vanilla effects below if you add a new estate or a new religion (for the clergy revolts)

#scaled_estate_<TOUHOU ESTATE>_land_share_effect = {
#	scaled_estate_land_share_add_effect = { estate = <TOUHOU ESTATE> }
#}

spawn_rebels_from_unhappy_estate = {
	random_list = {
		1 = {
			trigger = {
				owner = {
					has_estate = estate_nobles
					NOT = {
						estate_loyalty = {
							estate = estate_nobles
							loyalty = 30
						}
					}
				}
			}
			if = {
				limit = {
					owner = { primary_culture = polish }
				}
				spawn_rebels = {
					type = polish_noble_rebels
					size = $size$
					estate = estate_nobles
					as_if_faction = yes
				}
			}
			else = {
				spawn_rebels = {
					type = noble_rebels
					size = $size$
					estate = estate_nobles
					as_if_faction = yes
				}
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_church
					NOT = {
						estate_loyalty = {
							estate = estate_church
							loyalty = 30
						}
					}
				}
			}
			owner = {
				trigger_switch = {
					on_trigger = religion
					anglican =      { PREV = { spawn_rebels = { type = anglican_rebels size = $size$ as_if_faction = yes } } }
					hussite =      { PREV = { spawn_rebels = { type = hussite_rebels size = $size$ as_if_faction = yes } } }
					animism =       { PREV = { spawn_rebels = { type = animism_rebels size = $size$ as_if_faction = yes } } }
					buddhism =      { PREV = { spawn_rebels = { type = buddhism_rebels size = $size$ as_if_faction = yes } } }
					catholic =      { PREV = { spawn_rebels = { type = catholic_rebels size = $size$ as_if_faction = yes } } }
					confucianism =  { PREV = { spawn_rebels = { type = confucianism_rebels size = $size$ as_if_faction = yes } } }
					coptic =        { PREV = { spawn_rebels = { type = coptic_rebels size = $size$ as_if_faction = yes } } }
					hinduism =      { PREV = { spawn_rebels = { type = hinduism_rebels size = $size$ as_if_faction = yes } } }
					ibadi =         { PREV = { spawn_rebels = { type = ibadi_rebels size = $size$ as_if_faction = yes } } }
					inti =          { PREV = { spawn_rebels = { type = inti_rebels size = $size$ as_if_faction = yes } } }
					jewish =        { PREV = { spawn_rebels = { type = jewish_rebels size = $size$ as_if_faction = yes } } }
					mahayana =      { PREV = { spawn_rebels = { type = mahayana_rebels size = $size$ as_if_faction = yes } } }
					mesoamerican_religion = { PREV = { spawn_rebels = { type = maya_rebels size = $size$ as_if_faction = yes } } }
					nahuatl =       { PREV = { spawn_rebels = { type = nahuatl_rebels size = $size$ as_if_faction = yes } } }
					norse_pagan_reformed = { PREV = { spawn_rebels = { type = norse_pagan_reformed_rebels size = $size$ as_if_faction = yes } } }
					orthodox =      { PREV = { spawn_rebels = { type = orthodox_rebels size = $size$ as_if_faction = yes } } }
					protestant =    { PREV = { spawn_rebels = { type = protestant_rebels size = $size$ as_if_faction = yes } } }
					reformed =      { PREV = { spawn_rebels = { type = reformed_rebels size = $size$ as_if_faction = yes } } }
					shamanism =     { PREV = { spawn_rebels = { type = shamanism_rebels size = $size$ as_if_faction = yes } } }
					shiite =        { PREV = { spawn_rebels = { type = shiite_rebels size = $size$ as_if_faction = yes } } }
					shinto =        { PREV = { spawn_rebels = { type = shinto_rebels size = $size$ as_if_faction = yes } } }
					sikhism =       { PREV = { spawn_rebels = { type = sikhism_rebels size = $size$ as_if_faction = yes } } }
					sunni =         { PREV = { spawn_rebels = { type = sunni_rebels size = $size$ as_if_faction = yes } } }
					tengri_pagan_reformed = { PREV = { spawn_rebels = { type = tengri_pagan_reformed_rebels size = $size$ as_if_faction = yes } } }
					totemism =      { PREV = { spawn_rebels = { type = totemism_rebels size = $size$ as_if_faction = yes } } }
					vajrayana =     { PREV = { spawn_rebels = { type = vajrayana_rebels size = $size$ as_if_faction = yes } } }
					zoroastrian =   { PREV = { spawn_rebels = { type = zoroastrian_rebels size = $size$ as_if_faction = yes } } }
					#TOUHOU					
					th_hakureishinto =   { PREV = { spawn_rebels = { type = th_hakureishinto_rebels size = $size$ as_if_faction = yes } } }
					th_moriyashinto =   { PREV = { spawn_rebels = { type = th_moriya_rebels size = $size$ as_if_faction = yes } } }
					th_buddhist =   { PREV = { spawn_rebels = { type = th_buddhist_rebels size = $size$ as_if_faction = yes } } }
					th_taoist =   { PREV = { spawn_rebels = { type = th_taoist_rebels size = $size$ as_if_faction = yes } } }
					th_oldhakurei =   { PREV = { spawn_rebels = { type = th_old_hakurei_rebels size = $size$ as_if_faction = yes } } }
					th_shinkism =   { PREV = { spawn_rebels = { type = th_shinkistic_rebels size = $size$ as_if_faction = yes } } }
					th_christian =   { PREV = { spawn_rebels = { type = th_future_christian_rebels size = $size$ as_if_faction = yes } } }
					th_lunarian_religion =   { PREV = { spawn_rebels = { type = th_rel_lunarian_rebels size = $size$ as_if_faction = yes } } }
					#Make sure to add other religions here too 
				}
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_rajput
					NOT = {
						estate_loyalty = {
							estate = estate_rajput
							loyalty = 30
						}
					}
				}
			}
			spawn_rebels = {
				type = noble_rebels
				size = $size$
				estate = estate_rajput
				as_if_faction = yes
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_maratha
					NOT = {
						estate_loyalty = {
							estate = estate_maratha
							loyalty = 30
						}
					}
				}
			}
			spawn_rebels = {
				type = noble_rebels
				size = $size$
				estate = estate_maratha
				as_if_faction = yes
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_burghers
					NOT = {
						estate_loyalty = {
							estate = estate_burghers
							loyalty = 30
						}
					}
				}
			}
			spawn_rebels = {
				type = particularist_rebels
				size = $size$
				estate = estate_burghers
				as_if_faction = yes
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_jains
					NOT = {
						estate_loyalty = {
							estate = estate_jains
							loyalty = 30
						}
					}
				}
			}
			spawn_rebels = {
				type = particularist_rebels
				size = $size$
				estate = estate_jains
				as_if_faction = yes
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_vaisyas
					NOT = {
						estate_loyalty = {
							estate = estate_vaisyas
							loyalty = 30
						}
					}
				}
			}
			spawn_rebels = {
				type = particularist_rebels
				size = $size$
				estate = estate_vaisyas
				as_if_faction = yes
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_dhimmi
					NOT = {
						estate_loyalty = {
							estate = estate_dhimmi
							loyalty = 30
						}
					}
				}
			}
			spawn_rebels = {
				type = particularist_rebels
				size = $size$
				estate = estate_dhimmi
				as_if_faction = yes
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_brahmins
					NOT = {
						estate_loyalty = {
							estate = estate_brahmins
							loyalty = 30
						}
					}
				}
			}
			spawn_rebels = {
				type = hinduism_rebels
				size = $size$
				estate = estate_brahmins
				as_if_faction = yes
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_cossacks
					NOT = {
						estate_loyalty = {
							estate = estate_cossacks
							loyalty = 30
						}
					}
				}
			}
			spawn_rebels = {
				type = cossack_rebels
				size = $size$
				estate = estate_cossacks
				as_if_faction = yes
			}
		}
		1 = {
			trigger = {
				owner = {
					has_estate = estate_nomadic_tribes
					NOT = {
						estate_loyalty = {
							estate = estate_nomadic_tribes
							loyalty = 30
						}
					}
				}
			}
			spawn_rebels = {
				type = tribal_rebels
				size = $size$
				estate = estate_nomadic_tribes
				as_if_faction = yes
			}
		}
	}
}

th_pick_random_estate_if_present = {
	random_list = {
		1 = { 
			trigger = {
				has_estate = estate_brahmins
				NOT = { has_country_flag = estate_brahmins_$flag$ }
			}
			set_country_flag = estate_brahmins_$flag$
			[[estate_action]
			$estate_action$ = estate_brahmins
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_church
				NOT = { has_country_flag = estate_church_$flag$ }
			}
			set_country_flag = estate_church_$flag$
			[[estate_action]
			$estate_action$ = estate_church
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_maratha
				NOT = { has_country_flag = estate_maratha_$flag$ }
			}
			set_country_flag = estate_maratha_$flag$ 
			[[estate_action]
			$estate_action$ = estate_maratha
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_nobles
				NOT = { has_country_flag = estate_nobles_$flag$ }
			}
			set_country_flag = estate_nobles_$flag$
			[[estate_action]
			$estate_action$ = estate_nobles
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_burghers
				NOT = { has_country_flag = estate_burghers_$flag$ }
			}
			set_country_flag = estate_burghers_$flag$
			[[estate_action]
			$estate_action$ = estate_burghers
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_vaisyas
				NOT = { has_country_flag = estate_vaisyas_$flag$ }
			}
			set_country_flag = estate_vaisyas_$flag$
			[[estate_action]
			$estate_action$ = estate_vaisyas
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_cossacks
				NOT = { has_country_flag = estate_cossacks_$flag$ }
			}
			set_country_flag = estate_cossacks_$flag$
			[[estate_action]
			$estate_action$ = estate_cossacks
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_nomadic_tribes
				NOT = { has_country_flag = estate_nomadic_tribes_$flag$ }
			}
			set_country_flag = estate_nomadic_tribes_$flag$
			[[estate_action]
			$estate_action$ = estate_nomadic_tribes
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_dhimmi
				NOT = { has_country_flag = estate_dhimmi_$flag$ }
			}
			set_country_flag = estate_dhimmi_$flag$
			[[estate_action]
			$estate_action$ = estate_dhimmi
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_jains
				NOT = { has_country_flag = estate_jains_$flag$ }
			}
			set_country_flag = estate_jains_$flag$
			[[estate_action]
			$estate_action$ = estate_jains
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_rajput
				NOT = { has_country_flag = estate_rajput_$flag$ }
			}
			set_country_flag = estate_rajput_$flag$
			[[estate_action]
			$estate_action$ = estate_rajput
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_lunarian_rabbits
				NOT = { has_country_flag = estate_lunarian_rabbits_$flag$ }
			}
			set_country_flag = estate_lunarian_rabbits_$flag$
			[[estate_action]
			$estate_action$ = estate_lunarian_rabbits
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_great_tengu
				NOT = { has_country_flag = estate_great_tengu_$flag$ }
			}
			set_country_flag = estate_great_tengu_$flag$
			[[estate_action]
			$estate_action$ = estate_great_tengu
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_crow_tengu
				NOT = { has_country_flag = estate_crow_tengu_$flag$ }
			}
			set_country_flag = estate_crow_tengu_$flag$
			[[estate_action]
			$estate_action$ = estate_crow_tengu
			]
		}
		1 = { 
			trigger = {
				has_estate = estate_wolf_tengu
				NOT = { has_country_flag = estate_wolf_tengu_$flag$ }
			}
			set_country_flag = estate_wolf_tengu_$flag$
			[[estate_action]
			$estate_action$ = estate_wolf_tengu
			]
		}
	}
}