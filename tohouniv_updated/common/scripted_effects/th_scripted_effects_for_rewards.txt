#This file contains all the custom rewards of the mod
th_build_uptodate_fort = {
	if = {
		limit = {
			owner = {
				mil_tech = 24
			}
		}
		add_building = fort_18th 
	}
	else_if = {
		limit = {
			owner = {
				mil_tech = 19
			}
		}
		add_building = fort_17th 
	}
	else_if = {
		limit = {
			owner = {
				mil_tech = 14
			}
		}
		add_building = fort_16th 
	}
	else = {
		add_building = fort_15th 
	}
}

th_colonize_dev_province_for_root = {
	$province$ = {
		if = {
			limit = {
				is_empty = yes
			}
			cede_province = ROOT
			add_core = ROOT		
			change_religion = ROOT
			change_culture = ROOT
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
			[[trade_goods]
				change_trade_goods = $trade_goods$
			]
		}
		else_if = {
			limit = {
				owner = {
					OR = { 
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
			if = {
				limit = {
					NOT = { religion = ROOT }
				}
				change_religion = ROOT
			}
			if = {
				limit = {
					NOT = { culture = ROOT }
				}
				change_culture = ROOT
			}
		}
		else = {
			add_permanent_claim = ROOT
		}
	}
}

th_colonize_province_for_country = {	
	if = {
		limit = {
			is_empty = yes
		}
		cede_province = $who$
		add_core = $who$		
		change_religion = $who$
		change_culture = $who$
	}
	else_if = {
		limit = {
			owner = {
				OR = { 
					tag = $who$
					is_subject_of = $who$
				}
			}
		}
		add_base_tax = 1
		add_base_production = 1
		add_base_manpower = 1
		if = {
			limit = {
				NOT = { religion = $who$ }
			}
			change_religion = $who$
		}
		if = {
			limit = {
				NOT = { culture = $who$ }
			}
			change_culture = $who$
		}
	}
	else = {
		add_permanent_claim = $who$
	}
}

th_outdate_moon_defenses = {
	custom_tooltip = th_able_to_attack_lunarian_tt
	hidden_effect = {
		set_global_flag = th_lunarian_are_attackable_now_flag
	}
}

th_enable_conversion_dip_effect = { #Depreciated - Reused to fulfil a mission of MRY now
	custom_tooltip = th_enable_conversion_dip_action
	hidden_effect = {
		set_global_flag = th_mry_conversion_enabled
	}
}

th_enables_conversion_privilege_effect = {
	custom_tooltip = th_enables_conversion_privilege
	hidden_effect = {
		set_country_flag = th_enabled_conversion_privilege_flag
	}
}

th_immunity_against_the_plague = {	
	custom_tooltip = emp_ven_plague_doctor_training_tt
	hidden_effect = {
		set_country_flag = has_competent_doctors
	}
}

th_increase_donations_from_events = {
	custom_tooltip = th_increase_donations_from_events_tt
	hidden_effect = {
		set_country_flag = th_increased_donations_from_events
	}
}

th_increase_youkai_hunt_money = {
	custom_tooltip = th_increased_youkai_hunt_income_tt
	hidden_effect = {
		set_country_flag = th_increased_youkai_hunt_income
	}
}

th_allow_shorter_deity_swapping = {
	custom_tooltip = th_allow_shorter_deity_swapping_tt
	hidden_effect = {
		set_country_flag = th_permanent_shorter_deity_swapping
	}
}

th_enable_burgling_action_effect = {
	custom_tooltip = th_enable_burgling_action_tt
	hidden_effect = {
		set_country_flag = th_enable_burgling_action
	}
}

th_enable_book_theft_action_effect = {
	custom_tooltip = th_enable_book_theft_action_effect_tt
	hidden_effect = {
		set_country_flag = th_enable_book_theft_action
	}
}

th_enable_cleptomania_cb_effect = {
	custom_tooltip = th_enable_cleptomania_cb_effect_tt
	hidden_effect = {
		set_country_flag = th_enable_magician_expansion_cb
	}
}

th_enable_youkai_hunt_effect = {
	custom_tooltip = th_enable_youkai_hunt_tt
	hidden_effect = {
		set_country_flag = th_enable_youkai_hunt
		set_variable = {
			which = th_youkai_hunt_charges
			value = 2
		}
	}
}

th_enable_university_education = {
	custom_tooltip = th_enable_university_education_tt
	hidden_effect = {
		set_country_flag = th_university_education_enabled
		if = {
			limit = {
				has_country_flag = th_fairy_university_education_enabled
			}
			clr_country_flag = th_fairy_university_education_enabled
		}
	}
}

th_enable_fairy_university_education = {
	custom_tooltip = th_enable_university_education_tt
	hidden_effect = {
		set_country_flag = th_fairy_university_education_enabled
		if = {
			limit = {
				has_country_flag = th_university_education_enabled
			}
			clr_country_flag = th_university_education_enabled
		}
	}
}

th_enable_spring_power_effect = {
	custom_tooltip = th_enable_spring_power_effect_tt
	hidden_effect = {
		set_country_flag = th_power_of_spring_enabled
	}
}

th_increase_spring_power_effect = {
	if = {
		limit = {
			has_country_flag = lil_extend_spring_lv2
		}
		custom_tooltip = th_increase_spring_power_effect_end
		tooltip = {
			add_country_modifier = {
				name = lil_spring_buff_lv4
				duration = -1
			}
		}
		hidden_effect = {
			set_country_flag = lil_extend_spring_lv3
		}
	}
	else_if = {
		limit = {
			has_country_flag = lil_extend_spring_lv1
		}
		custom_tooltip = th_increase_spring_power_effect_boundless
		tooltip = {
			add_country_modifier = {
				name = lil_spring_buff_lv3
				duration = 270
			}
		}
		hidden_effect = {
			set_country_flag = lil_extend_spring_lv2
		}
	}
	else = {
		custom_tooltip = th_increase_spring_power_effect_boundless
		tooltip = {
			add_country_modifier = {
				name = lil_spring_buff_lv2
				duration = 180
			}
		}
		hidden_effect = {
			set_country_flag = lil_extend_spring_lv1
		}
	}
}

th_increase_berserk_spreading_effect = {
	custom_tooltip = th_increase_berserk_spreading_tt
	hidden_effect = {
		set_country_flag = th_increase_berserk_spreading
	}
}

th_enable_colonial_maintenance_reduction_effect = {
	custom_tooltip = th_enable_colonial_maintenance_reduction_tt
	hidden_effect = {
		if = {
			limit = {
				NOT = { has_country_flag = th_enable_colonial_maitenance_reduction }
			}
			set_country_flag = th_enable_colonial_maitenance_reduction
			set_variable = {
				which = th_allowed_colonies_for_reduction
				value = 1
			}
		}
		else = {
			change_variable = {
				which = th_allowed_colonies_for_reduction
				value = 1
			}
		}
	}
}

th_enable_scarlet_bloodlust_effect = {
	custom_tooltip = th_enable_scarlet_bloodlust_effect_tt
	hidden_effect = {
		set_country_flag = th_scarlet_bloodlust_enabled
	}
}

th_upgrade_scarlet_bloodlust_effect = {
	custom_tooltip = th_upgrade_scarlet_bloodlust_effect_tt
	hidden_effect = {
		set_country_flag = th_scarlet_bloodlust_upgraded
	}
}

th_enable_scarlet_charisma_effect = {
	custom_tooltip = th_enable_scarlet_charisma_effect_tt
	hidden_effect = {
		set_country_flag = th_scarlet_charisma_enabled
	}
}

th_enable_assert_dominance_cb_effect = {
	custom_tooltip = th_enable_assert_dominance_cb_effect_tt
	hidden_effect = {
		set_country_flag = th_can_use_assert_dominance_cb
	}
}

th_upgrade_scarlet_charimsa_effect = {
	custom_tooltip = th_upgrade_scarlet_charimsa_effect_tt
	hidden_effect = {
		set_country_flag = th_scarlet_charisma_upgraded
	}
}

th_upgrade_satori_abilities_effect = {
	custom_tooltip = th_upgrade_satori_abilities_effect_tt
	hidden_effect = {
		set_country_flag = th_upgraded_satori_abilities
	}
}

th_enable_diplomatic_immunity_cb_effect = {
	custom_tooltip = th_enable_diplomatic_immunity_cb_effect_tt
	hidden_effect = {
		set_country_flag = th_can_use_assert_dominance_cb
	}
}

th_remove_autonomy_from_all_provinces_effect = {
	custom_tooltip = th_remove_autonomy_from_all_provinces
	hidden_effect = {
		every_owned_province = {
			add_local_autonomy = -100
		}
	}
}

th_add_manufactory = {
	if = {
		limit = {
			trade_goods = coal
			has_dlc = "Rule Britannia"
		}
		add_building = furnace
	}
	if = {
		limit = {
			th_has_wharf_trade_goods = yes
		}
		add_building = wharf
	}
	if = {
		limit = {
			th_has_weapons_trade_goods = yes
		}
		add_building = weapons
	}
	if = {
		limit = { 
			th_has_textile_trade_goods = yes
		}
		add_building = textile
	}
	if = {
		limit = {
			th_has_plantation_trade_goods = yes
		}
		add_building = plantations
	}
	if = {
		limit = {
			th_has_trade_company_trade_goods = yes
		}
		add_building = tradecompany
	}
	if = {
		limit = {
			th_has_farm_trade_goods = yes
		}
		add_building = farm_estate
	}
	if = {
		limit = {
			th_has_mills_trade_goods = yes
		}
		add_building = mills
	}
}

th_get_default_permanent_province_buff = {
	hidden_effect = {
		home_trade_node_effect_scope = {
			random_trade_node_member_province = {
				limit = {
					owned_by = ROOT
				}
				save_event_target_as = reward_province
			}
			random_trade_node_member_province = {
				limit = {
					owned_by = ROOT
					is_capital = yes
				}
				save_event_target_as = reward_province
			}
			random_trade_node_member_province = {
				limit = {
					owned_by = ROOT
					development = CAPITAL
					is_capital = no
				}
				save_event_target_as = reward_province
			}
			random_trade_node_member_province = {
				limit = {
					owned_by = ROOT
					development = CAPITAL
					is_capital = no
					development = 20
				}
				save_event_target_as = reward_province
			}
			random_trade_node_member_province = {
				limit = {
					owned_by = ROOT
					development = CAPITAL
					is_capital = no
					development = 25
				}
				save_event_target_as = reward_province
			}
			random_trade_node_member_province = {
				limit = {
					owned_by = ROOT
					development = CAPITAL
					is_capital = no
					development = 30
				}
				save_event_target_as = reward_province
			}
		}
	}
	if = {
		limit = { has_saved_event_target = reward_province }
		event_target:reward_province = {
			add_province_modifier = {
				name = "dominant_trade_hub"
				duration = -1
			}
		}
	}
	else = {
		custom_tooltip = dominant_home_node_reward_tooltip
	}
}

th_reveal_all_terra_incognito = {
	custom_tooltip = th_reveal_all_terra_incognito_tt
	hidden_effect = {
		every_province = {	
			discover_country = ROOT
		}
		east_china_sea_region = {
			discover_country = ROOT
		}
		south_china_sea_region = {
			discover_country = ROOT
		}
		north_west_pacific_region = {			
			discover_country = ROOT
		}
		south_west_pacific_region = {			
			discover_country = ROOT
		}
		north_east_pacific_region = {
			discover_country = ROOT
		}
		south_east_pacific_region = {
			discover_country = ROOT
		}
		south_west_pacific_region = {
			discover_country = ROOT
		}
		pacific_south_america_region = {
			discover_country = ROOT
		}
		Pacific_Gensokyan_sea = {
			discover_country = ROOT
		}
		east_indian_ocean_region = {
			discover_country = ROOT
		}
		west_indian_ocean_region = {
			discover_country = ROOT
		}
		south_indian_ocean_region = {
			discover_country = ROOT
		}
		arabian_sea_region = {
			discover_country = ROOT
		}
		south_atlantic_region = {
			discover_country = ROOT
		}
		atlantic_south_america_region = {
			discover_country = ROOT
		}
		west_african_sea_region = {
			discover_country = ROOT
		}
		caribbean_sea_region = {
			discover_country = ROOT
		}
		american_east_coast_region = {
			discover_country = ROOT
		}
		north_atlantic_region = {
			discover_country = ROOT
		}
		baltic_sea_region = {
			discover_country = ROOT
		}
		mediterrenean_region = {
			discover_country = ROOT
		}
	}
}

th_coastal_slave_raid_immunity = {
	custom_tooltip = th_coastal_slave_raid_immunity_tt
	hidden_effect = {
		add_permanent_province_modifier = {
			name = th_raid_immunity
			duration = -1
		}
	}
}

th_remove_merc_penalty = {
	custom_tooltip = th_remove_merc_penalty_tt
	hidden_effect = {
		set_country_flag = th_free_merc_companies
	}
}

th_spawn_random_unit = {
	random_list = {
		$infantry_chance$ = {
			infantry = ROOT
		}
		$cavalry_chance$ = {
			cavalry = ROOT
		}
		$artillery_chance$ = {
			artillery = ROOT
		}
	}
}

th_add_global_prosperity = {
	tooltip = {
		capital_scope = {
			add_prosperity = $prosperity$
		}
	}
	custom_tooltip = th_add_global_prosperity_tt
	hidden_effect = {
		every_owned_province = {
			add_prosperity = $prosperity$
		}
	}
}

th_add_global_devastation = {
	tooltip = {
		capital_scope = {
			add_devastation = $devastation$
		}
	}
	custom_tooltip = th_add_global_devastation_tt
	hidden_effect = {
		every_owned_province = {
			add_devastation = $devastation$
		}
	}
}

th_enable_free_respawn = {
	custom_tooltip = th_enable_free_respawn_tt
	hidden_effect = {
		set_country_flag = th_free_respawn
	}
}

th_halve_respawn_cooldown = {
	custom_tooltip = th_halve_respawn_cooldown_tt
	hidden_effect = {
		set_country_flag = th_halved_respawn_cd
	}
}

th_remove_annexation_penalty = {
	custom_tooltip = th_remove_annexation_penalty_tt
	hidden_effect = {
		set_country_flag = th_diplomatic_hegemon
	}
}

th_grant_propogate_religion_immunity = {
	custom_tooltip = th_grant_propogate_religion_immunity_tt
	hidden_effect = {
		set_country_flag = th_immune_against_propogate_religion
	}
}

th_enable_population_suppression_on_merc_recruitment = {
	custom_tooltip = th_enable_population_suppression_on_merc_recruitment_tt
	hidden_effect = {
		set_country_flag = th_merc_suppress_revolt
	}
}

th_eighty_percent_merc_army_professionalism_cost = {
	custom_tooltip = th_eighty_percent_merc_army_professionalism_cost_tt
	hidden_effect = {
		set_country_flag = th_merc_eighty_percent_professionalism_cost
	}
}

th_enable_merc_mil_decision = {
	custom_tooltip = th_enable_merc_mil_decision_tt
	hidden_effect = {
		set_country_flag = th_enabled_decision_for_mil_cost_for_merc
	}
}

th_allow_insta_loot_on_merc_recruitment = {
	custom_tooltip = th_allow_insta_loot_on_merc_recruitment_tt
	hidden_effect = {
		set_country_flag = th_enabled_instant_loot_on_merc_recruitment
	}
}

#Make sure to make your own custom tooltip for it because parameters can't be given as input. Sadly.
th_transfer_treasury = {
	#custom_tooltip = th_transfer_treasury_tt	#Transfer §Y[$giver$.$variable$.GetValue]§! Ducats to $Y[$taker$.GetName]§!.
	hidden_effect = {
		$giver$ = {
			while = {
				limit = {
					check_variable = {
						which = $variable$
						value = 1
					}
				}
				$taker$ = {
					add_treasury = 1
				}
				add_treasury = -1
				subtract_variable = {
					which = $variable$
					value = 1
				}
			}
			multiply_variable = {
				which = $variable$
				value = 100
			}
			while = {
				limit = {
					check_variable = {
						which = $variable$
						value = 1
					}
				}
				$taker$ = {
					add_treasury = 0.01
				}
				add_treasury = -0.01
				subtract_variable = {
					which = $variable$
					value = 1
				}
			}
		}
	}
}

th_delete_treasury = {
	#custom_tooltip = th_transfer_treasury_tt	#Remove §Y[$giver$.$variable$.GetValue]§! Ducats. Oof...
	hidden_effect = {
		$giver$ = {
			while = {
				limit = {
					check_variable = {
						which = $variable$
						value = 1
					}
				}
				add_treasury = -1
				subtract_variable = {
					which = $variable$
					value = 1
				}
			}
			multiply_variable = {
				which = $variable$
				value = 100
			}
			while = {
				limit = {
					check_variable = {
						which = $variable$
						value = 1
					}
				}
				add_treasury = -0.01
				subtract_variable = {
					which = $variable$
					value = 1
				}
			}
		}
	}
}

th_allow_converting_on_claim = {
	#Supports currently the following religions:
	#th_hakureishinto
	#th_taoist
	#th_buddhist
	#th_moriyashinto
	#th_oldhakurei
	#th_shinkism
	#th_christian
	#th_lunarian_religion
	[[religion]
		custom_tooltip = th_allow_$religion$_converting_on_claim_tt
		hidden_effect = {
			set_country_flag = th_enabled_$religion$_converting_on_claim
		}
	]
	[[always]
		custom_tooltip = th_allow_converting_on_claim_tt
		hidden_effect = {
			set_country_flag = th_enabled_converting_on_claim
		}
	]
	[[shrine_only]
		custom_tooltip = th_allow_converting_for_shrines_only_tt
		hidden_effect = {
			set_country_flag = th_enabled_converting_on_claims_for_shrines
		}
	]
}

th_allow_convert_heathens_peace_treaty = {
	#Supports currently the following religions:
	#th_hakureishinto
	#th_taoist
	#th_buddhist
	#th_moriyashinto
	#th_oldhakurei
	#th_shinkism
	#th_christian
	#th_lunarian_religion
	[[religion]
		custom_tooltip = th_allow_convert_heathens_peace_treaty_for_$religion$_tt
		hidden_effect = {
			set_country_flag = th_can_enforce_heathen_conversion_for_$religion$_flag
		}
	]
	[[always]
		custom_tooltip = th_allow_convert_heathens_peace_treaty_tt
		hidden_effect = {
			set_country_flag = th_can_enforce_heathen_conversion_flag
		}
	]
	[[shrine_only]
		custom_tooltip = th_allow_colony_converting_for_shrines_only_tt
		hidden_effect = {
			set_country_flag = th_can_enforce_heathen_conversion_flag_shrines
		}
	]
}

th_allow_converting_on_colonization = {
	#Supports currently the following religions:
	#th_hakureishinto
	#th_taoist
	#th_buddhist
	#th_moriyashinto
	#th_oldhakurei
	#th_shinkism
	#th_christian
	#th_lunarian_religion
	[[religion]
		custom_tooltip = th_allow_$religion$_converting_on_colonization_tt
		hidden_effect = {
			set_country_flag = th_enabled_$religion$_converting_on_colonization
		}
	]
	[[always]
		custom_tooltip = th_allow_converting_on_colonization_tt
		hidden_effect = {
			set_country_flag = th_enabled_converting_on_colonization
		}
	]
	[[shrine_only]
		custom_tooltip = th_allow_colony_converting_for_shrines_only_tt
		hidden_effect = {
			set_country_flag = th_enabled_converting_on_colonizations_for_shrines
		}
	]
}

th_allow_incite_religious_rebels = {
	custom_tooltip = th_allow_incite_religious_rebels_tt
	hidden_effect = {
		set_country_flag = th_enabled_incite_religious_rebels
	}
}

th_allow_ask_for_conversion = {
	#Supports following religions
	#th_hakureishinto
	#th_taoist
	#th_buddhist
	#th_moriyashinto
	#th_oldhakurei
	#th_shinkism
	#th_christian
	#th_lunarian_religion
	[[religion]
		custom_tooltip = th_allow_$religion$_ask_conversion_tt
		hidden_effect = {
			set_country_flag = th_enabled_$religion$_ask_conversion
		}
	]
	[[always]
		custom_tooltip = th_allow_ask_for_conversion_tt
		hidden_effect = {
			set_country_flag = th_enabled_ask_conversion
		}
	]
	[[shrine_only]
		custom_tooltip = th_allow_converting_for_shrines_only_tt
		hidden_effect = {
			set_country_flag = th_enabled_ask_conversion_for_shrines
		}
	]
}

###CIN specific reward###
cin_tolerate_or_purge_culture = {
	if = {
		limit = {
			has_country_flag = cin_tolerant_path_mission
		}
		if = {
			limit = {
				NOT = { accepted_culture = $culture$ }
			}
			add_accepted_culture = $culture$
		}
		custom_tooltip = CIN_tolerant_effect_tt
		tooltip = {
			add_country_modifier = {
				name = $tolerance_modifier$
				duration = $tolerance_duration$
			}
		}
		hidden_effect = {
			every_province = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
					culture = $culture$
					NOT = { culture = ROOT }
				}
				add_province_modifier = {
					name = $tolerance_modifier$
					duration = $tolerance_duration$
				}
			}
		}
	}
	else_if = {
		limit = {
			has_country_flag = cin_vengeance_path_mission
		}
		custom_tooltip = CIN_vengeance_effect_tt
		tooltip = {
			random_province = {
				limit = {
					culture = $culture$
					NOT = { culture = ROOT }
				}
				add_province_modifier = {
					name = $vengeance_modifier$
					duration = $vengeance_duration$
				}
			}
		}
		hidden_effect = {
			every_province = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
					culture = $culture$
					NOT = { culture = ROOT }
				}
				add_province_modifier = {
					name = $vengeance_modifier$
					duration = $vengeance_duration$
				}
			}
		}
	}
	else = {		
		custom_tooltip = CIN_path_depended_reward
	}
}

###LRV specific reward###
lrv_improve_eternitys_god_level = {
	if = {
		limit = {
			NOT = { has_country_flag = lrv_rised_to_godhood }
		}
		hidden_effect = {
			set_country_flag = lrv_rised_to_godhood
		}
		add_country_modifier = {
			name = lrv_acknowledgement_as_goddess_lv1
			duration = -1
		}
	}
	else_if = {
		limit = {
			has_country_modifier = lrv_acknowledgement_as_goddess_lv1
		}
		remove_country_modifier = lrv_acknowledgement_as_goddess_lv1
		add_country_modifier = {
			name = lrv_acknowledgement_as_goddess_lv2
			duration = -1
		}
	}
	else_if = {
		limit = {
			has_country_modifier = lrv_acknowledgement_as_goddess_lv2
		}
		remove_country_modifier = lrv_acknowledgement_as_goddess_lv2
		add_country_modifier = {
			name = lrv_acknowledgement_as_goddess_lv3
			duration = -1
		}
	}
	else_if = {
		limit = {
			has_country_modifier = lrv_acknowledgement_as_goddess_lv3
		}
		remove_country_modifier = lrv_acknowledgement_as_goddess_lv3
		add_country_modifier = {
			name = lrv_acknowledgement_as_goddess_lv4
			duration = -1
		}
	}
	else_if = {
		limit = {
			has_country_modifier = lrv_acknowledgement_as_goddess_lv4
		}
		remove_country_modifier = lrv_acknowledgement_as_goddess_lv4
		add_country_modifier = {
			name = lrv_acknowledgement_as_goddess_lv5
			duration = -1
		}
	}
	else_if = {
		limit = {
			has_country_modifier = lrv_acknowledgement_as_goddess_lv5
		}
		remove_country_modifier = lrv_acknowledgement_as_goddess_lv5
		add_country_modifier = {
			name = lrv_acknowledgement_as_goddess_lv6
			duration = -1
		}
	}
}

###SFF specific reward###
sff_enable_drain_nature_action = {
	custom_tooltip = sff_enable_drain_nature_action_tt
	hidden_effect = {
		set_country_flag = sff_enabled_drain_nature
	}
}

sff_increase_sun_power_effect = {
	if = {
		limit = {
			has_country_modifier = sff_sunflower_power_growth_lv4
		}
		add_country_modifier = {
			name = sff_sunflower_power_growth_lv5
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = sff_sunflower_power_growth_lv4
		}
	}
	else_if = {
		limit = {
			has_country_modifier = sff_sunflower_power_growth_lv3
		}
		add_country_modifier = {
			name = sff_sunflower_power_growth_lv4
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = sff_sunflower_power_growth_lv3
		}
	}
	else_if = {
		limit = {
			has_country_modifier = sff_sunflower_power_growth_lv2
		}
		add_country_modifier = {
			name = sff_sunflower_power_growth_lv3
			duration = -1
		}
		hidden_effect = {
			remove_country_modifier = sff_sunflower_power_growth_lv2
		}
	}
	else = {
		add_country_modifier = {
			name = sff_sunflower_power_growth_lv2
			duration = -1
		}
	}
}

###SCR specific reward###
scr_make_meiling_company_free = {
	custom_tooltip = scr_make_meiling_company_free_tt
	hidden_effect = {
		set_country_flag = scr_professional_meiling_troops_only
	}
}

scr_enable_koakuma_explorer = {
	custom_tooltip = scr_enable_koakuma_explorer_tt
	hidden_effect = {
		set_country_flag = scr_can_hire_koakuma_as_explorer
		set_variable = {
			which = scr_koakuma_cola_reserve
			value = 3
		}
	}
}

###CRD specific reward###
crd_enable_third_eye_privilege = {
	custom_tooltip = crd_enable_third_eye_privilege_tt
	hidden_effect = {
		set_country_flag = th_enabled_third_eye
	}
}

###FOM specific reward###
fom_enable_goliath_doll_merc = {
	custom_tooltip = fom_enable_goliath_doll_merc_tt
	hidden_effect = {
		set_country_flag = th_goliath_unlocked
	}
}

fom_enable_titania_doll_merc = {
	custom_tooltip = fom_enable_titania_doll_merc_tt
	hidden_effect = {
		set_country_flag = th_titania_unlocked
	}
}

fom_enable_leviathan_doll_merc = {
	custom_tooltip = fom_enable_leviathan_doll_merc_tt
	hidden_effect = {
		set_country_flag = th_leviathan_unlocked
	}
}

###NET specific reward###
#Will not remove the below because of potential use for submods + it doesn't negatively affect neither script nor game
net_enable_general_youmu_recruitment = {
	custom_tooltip = net_allows_recruiting_general_youmu
	hidden_effect = {
		set_country_flag = net_can_hire_general_youmu
	}
}

net_enable_general_advisor_youmu = {
	custom_tooltip = net_enable_general_advisor_youmu_tt
	hidden_effect = {
		set_country_flag = net_can_use_youmu_decision
	}
}

net_enable_cuisine_mechanic = {
	custom_tooltip = net_enable_cuisine_mechanic_tt
	hidden_effect = {
		set_country_flag = net_has_cuisine_mechanic
		set_variable = {
			which = net_active_cuisine_counter
			value = 0
		}
		set_variable = {
			which = net_unlocked_cuisines
			value = 0
		}
	}
}

###MHG specific reward###
mhg_enable_elite_mercenaries = {
	custom_tooltip = mhg_enable_elite_mercenaries_tt
	hidden_effect = {
		set_country_flag = mhg_can_recruit_elite_mercs
	}
}

mhg_enable_provoke_war_action = {
	custom_tooltip = mhg_enable_provoke_war_action_tt
	hidden_effect = {
		set_country_flag = th_can_provoke_single_war
	}
}

mhg_increase_subjects_opinion = {
	custom_tooltip = mhg_increase_subjects_opinion_tt
	hidden_effect = {
		set_country_flag = mhg_has_increased_subject_opinion
		every_subject_country = {
			add_opinion = {
				who = ROOT
				modifier = th_mhg_master_puppeteer
			}
		}
	}
}

mhg_remove_stab_hit_from_yukari_sleep = {
	custom_tooltip = mhg_remove_stab_hit_from_yukari_sleep_tt
	hidden_effect = {
		set_country_flag = mhg_no_stab_hits_on_sleep
	}
}

###EIT specific reward###
eit_enable_influencing_outworld = {
	custom_tooltip = eit_enable_influencing_outworld_tt
	hidden_effect = {
		set_country_flag = eit_can_influence_outworld
	}
}

eit_enable_outworld_tributary = {
	custom_tooltip = eit_enable_outworld_tributary_tt
	hidden_effect = {
		set_country_flag = eit_can_create_tributary_state
	}
}

###MRY specific reward###
mry_enables_tributary_war_effect = {
	custom_tooltip = mry_enables_tributary_war_tt
	hidden_effect = {
		set_country_flag = th_enable_religious_tributary_war
	}
}

mry_allow_religious_tributaries = {
	custom_tooltip = mry_allow_religious_tributaries_tt
	hidden_effect = {
		set_country_flag = mry_can_create_religious_tributaries
	}
}

mry_activate_moriya_curia = {
	custom_tooltip = mry_activate_moriya_curia_tt
	hidden_effect = {
		set_country_flag = mry_moriya_curia_active
		set_variable = {
			which = faith_power
			value = 0
		}
		add_country_modifier = {
			name = th_faith_power_base_capacity
			duration = -1
		}
		set_variable = {
			which = mry_miracle_counter
			value = 0
		}
	}
}

mry_enable_purchase_deity_advisor = {
	custom_tooltip = mry_enable_purchase_deity_advisor_tt
	hidden_effect = {
		set_country_flag = mry_can_purchase_deity_advisor
	}
}

mry_double_tributary_faith_power = {
	custom_tooltip = mry_double_tributary_faith_power_tt
	hidden_effect = {
		set_country_flag = mry_doubled_faith_power
	}
}

###Penalties###

th_disable_all_mercs = {
	custom_tooltip = th_disable_all_mercs_tt
	hidden_effect = {
		set_country_flag = th_disabled_mercenaries
	}
}

th_enable_all_mercs = {
	custom_tooltip = th_enable_all_mercs_tt
	hidden_effect = {
		clr_country_flag = th_disabled_mercenaries
	}
}

th_disable_exploration_without_explo_ideas = {
	custom_tooltip = th_disable_exploration_without_explo_ideas_tt
	hidden_effect = {
		clr_country_flag = th_can_hire_explorers_without_ideas
	}
}

th_enable_exploration_without_explo_ideas = {
	custom_tooltip = th_enable_exploration_without_explo_ideas_tt
	hidden_effect = {
		set_country_flag = th_can_hire_explorers_without_ideas
	}
}

th_balkanize_country = {
	custom_tooltip = th_balkanize_country_tt
	hidden_effect = {
		while = {
			limit = {
				any_owned_province = {
					NOT = { has_province_flag = th_province_to_give_back_from_@ROOT }
					NOT = { has_province_flag = th_province_to_release_from_@ROOT }
					is_capital = no
					any_core_country = {
						NOT = { tag = ROOT }
						exists = no
					}
				}
			}
			random_owned_province = {
				limit = {
					NOT = { has_province_flag = th_province_to_give_back_from_@ROOT }
					NOT = { has_province_flag = th_province_to_release_from_@ROOT }
					is_capital = no
					any_core_country = {
						NOT = { tag = ROOT }
						exists = no
					}
				}
				set_province_flag = th_province_to_release_from_@ROOT
			}
		}
		while = {
			limit = {
				any_owned_province = {
					NOT = { has_province_flag = th_province_to_give_back_from_@ROOT }
					NOT = { has_province_flag = th_province_to_release_from_@ROOT }
					NOT = { province_id = event_target:mhg_province_to_give }
					is_capital = no
					any_core_country = {
						NOT = { tag = ROOT }
						exists = yes
					}
				}
			}
			random_owned_province = {
				limit = {
					NOT = { has_province_flag = th_province_to_give_back_from_@ROOT }
					NOT = { has_province_flag = th_province_to_release_from_@ROOT }
					NOT = { province_id = event_target:mhg_province_to_give }
					is_capital = no
					any_core_country = {
						NOT = { tag = ROOT }
						exists = yes
					}
				}
				set_province_flag = th_province_to_give_back_from_@ROOT
			}
		}
		every_owned_province = {
			limit = { 
				has_province_flag = th_province_to_release_from_@ROOT
			}
			random_core_country = {
				limit = {
					NOT = { tag = ROOT }
				}
				PREV = {
					cede_province = PREV
					remove_core = ROOT
				}
			}
			clr_province_flag = th_province_to_release_from_@ROOT
		}
		every_owned_province = {
			limit = { 
				has_province_flag = th_province_to_give_back_from_@ROOT
			}
			random_core_country = {
				limit = {
					NOT = { tag = ROOT }
					exists = yes
				}
				PREV = {
					cede_province = PREV
					remove_core = ROOT
				}
			}
			clr_province_flag = th_province_to_give_back_from_@ROOT
		}
	}
}