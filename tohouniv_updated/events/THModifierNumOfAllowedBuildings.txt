namespace = th_allowed_buildings_events

#Set bonus
country_event = {
	id = th_allowed_buildings_events.1
	title = th_allowed_buildings_events.1.t
	desc = none
	picture = none
	hidden = yes

	trigger = {
		OR = {
			AND = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = 0.04
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_4 }
				}
			}
			AND = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = 0.03
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.04
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_3 }
				}
			}
			AND = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = 0.02
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.03
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_2 }
				}
			}
			AND = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = 0.01
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.02
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_1 }
				}
			}
			AND = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = -0.01
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.0
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_negative_1 }
				}
			}
			AND = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = -0.02
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.01
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_negative_2 }
				}
			}
			AND = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = -0.03
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.02
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_negative_3 }
				}
			}
			AND = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = -0.04
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.03
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_negative_4 }
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	option = {
		if = {
			limit = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = 0.04
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_4 }
				}
			}
			every_owned_province = {
				add_province_modifier = {
					name = th_allowed_buildings_4
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = 0.03
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.04
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_3 }
				}
			}
			every_owned_province = {
				add_province_modifier = {
					name = th_allowed_buildings_3
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = 0.02
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.03
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_2 }
				}
			}
			every_owned_province = {
				add_province_modifier = {
					name = th_allowed_buildings_2
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = 0.01
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.02
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_1 }
				}
			}
			every_owned_province = {
				add_province_modifier = {
					name = th_allowed_buildings_1
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = -0.01
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = 0.0
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_negative_1 }
				}
			}
			every_owned_province = {
				add_province_modifier = {
					name = th_allowed_buildings_negative_1
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = -0.02
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = -0.01
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_negative_2 }
				}
			}
			every_owned_province = {
				add_province_modifier = {
					name = th_allowed_buildings_negative_2
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = -0.03
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = -0.02
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_negative_3 }
				}
			}
			every_owned_province = {
				add_province_modifier = {
					name = th_allowed_buildings_negative_3
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_global_modifier_value = {
					which = global_allowed_num_of_buildings
					value = -0.04
				}
				NOT = {
					has_global_modifier_value = {
						which = global_allowed_num_of_buildings
						value = -0.03
					}
				}
				any_owned_province = {
					NOT = { has_province_modifier = th_allowed_buildings_negative_4 }
				}
			}
			every_owned_province = {
				add_province_modifier = {
					name = th_allowed_buildings_negative_4
					duration = -1
				}
			}
		}
		
		ai_chance = {
			factor = 100
		}
	}
}

#Remove bonus
country_event = {
	id = th_allowed_buildings_events.2
	title = th_allowed_buildings_events.2.t
	desc = none
	picture = none

	trigger = {
		any_owned_province = {
			OR = {
				has_province_modifier = th_allowed_buildings_1
				has_province_modifier = th_allowed_buildings_2
				has_province_modifier = th_allowed_buildings_3
				has_province_modifier = th_allowed_buildings_4
				has_province_modifier = th_allowed_buildings_negative_1
				has_province_modifier = th_allowed_buildings_negative_2
				has_province_modifier = th_allowed_buildings_negative_3
				has_province_modifier = th_allowed_buildings_negative_4
			}
		}
		has_global_modifier_value = {
			which = global_allowed_num_of_buildings
			value = 0
		}
		NOT = {
			has_global_modifier_value = {
				which = global_allowed_num_of_buildings
				value = 0.01
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	hidden = yes

	option = {
		every_owned_province = {
			if = { limit = { has_province_modifier = th_allowed_buildings_1 } remove_province_modifier = th_allowed_buildings_1 }
			if = { limit = { has_province_modifier = th_allowed_buildings_2 } remove_province_modifier = th_allowed_buildings_2 }
			if = { limit = { has_province_modifier = th_allowed_buildings_3 } remove_province_modifier = th_allowed_buildings_3 }
			if = { limit = { has_province_modifier = th_allowed_buildings_4 } remove_province_modifier = th_allowed_buildings_4 }
			if = { limit = { has_province_modifier = th_allowed_buildings_negative_1 } remove_province_modifier = th_allowed_buildings_negative_1 }
			if = { limit = { has_province_modifier = th_allowed_buildings_negative_2 } remove_province_modifier = th_allowed_buildings_negative_2 }
			if = { limit = { has_province_modifier = th_allowed_buildings_negative_3 } remove_province_modifier = th_allowed_buildings_negative_3 }
			if = { limit = { has_province_modifier = th_allowed_buildings_negative_4 } remove_province_modifier = th_allowed_buildings_negative_4 }
		}
		
		ai_chance = {
			factor = 100
		}
	}
}