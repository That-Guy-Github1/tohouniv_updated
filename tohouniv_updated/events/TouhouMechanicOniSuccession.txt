namespace = th_oni_succession

#Gets a new province with a never met culture
country_event = {
	id = th_oni_succession.1
	title = "th_oni_succession.1.t"
	desc = "th_oni_succession.1.desc"
	picture = YUUGI_eventPicture

	is_triggered_only = yes
	trigger = {
		has_government_attribute = th_has_oni_succession
		is_lesser_in_union = no
	}

	option = {	#Yuugi
		name = "th_oni_succession.1.a"
		trigger = {
			NOT = { has_country_flag = th_oni_had_yuugi }
		}
		define_ruler = {
			name = "Yuugi"
			dynasty = "Hoshiguma"
			culture = ROOT
			adm = 5
			dip = 4
			mil = 6
			age = 20
			claim = 50
			female = yes
		}
		hidden_effect = {
			add_ruler_personality = immortal_personality
			set_ruler_flag = touhou_character_ruler
			set_ruler_flag = touhou_original_ruler
			clr_country_flag = th_oni_had_suika
			clr_country_flag = th_oni_had_kasen
			set_country_flag = th_oni_had_yuugi
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {	#Suika
		name = "th_oni_succession.1.b"
		trigger = {
			NOT = { has_country_flag = th_oni_had_suika }
			NOT = { HKR = { has_ruler_modifier = HKR_suikas_power } }	#Why should you have Suika when she is managing HKR?
		}
		define_ruler = {
			name = "Suika"
			dynasty = "Ibuki"
			culture = ROOT
			adm = 4
			dip = 5
			mil = 6
			age = 20
			claim = 50
			female = yes
		}
		hidden_effect = {
			add_ruler_personality = immortal_personality
			set_ruler_flag = touhou_character_ruler
			set_ruler_flag = touhou_original_ruler
			set_country_flag = th_oni_had_suika
			clr_country_flag = th_oni_had_kasen
			clr_country_flag = th_oni_had_yuugi
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {	#Kasen
		name = "th_oni_succession.1.c"
		trigger = {
			NOT = { has_country_flag = th_oni_had_kasen }
			NOT = { exists = KSE }
		}
		define_ruler = {
			name = "Kasen"
			dynasty = "Ibaraki"
			culture = ROOT
			adm = 5
			dip = 5
			mil = 5
			age = 20
			claim = 50
			female = yes
		}
		hidden_effect = {
			add_ruler_personality = immortal_personality
			set_ruler_flag = touhou_character_ruler
			set_ruler_flag = touhou_original_ruler
			clr_country_flag = th_oni_had_suika
			set_country_flag = th_oni_had_kasen
			clr_country_flag = th_oni_had_yuugi
		}
		ai_chance = {
			factor = 100
		}
	}

	option = {	#Random Oni
		name = "th_oni_succession.1.d"
		define_ruler = {
			culture = ROOT
			age = 20
			claim = 50
		}
		hidden_effect = {
			clr_country_flag = th_oni_had_suika
			clr_country_flag = th_oni_had_kasen
			clr_country_flag = th_oni_had_yuugi
		}
		add_ruler_modifier = {
			name = oni_new_fighting_innovativeness
			duration = 7300
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {	#Current heir
		name = "th_oni_succession.1.e"
		custom_tooltip = "th_oni_succession.1.e.tt"
		add_legitimacy = 20
		hidden_effect = {
			clr_country_flag = th_oni_had_suika
			clr_country_flag = th_oni_had_kasen
			clr_country_flag = th_oni_had_yuugi
		}
		ai_chance = {
			factor = 100
		}
	}

	after = {
		if = {
			limit = { is_female = yes } 
			convert_female_ruler_to_general = yes
		}
		else = { convert_ruler_to_general = yes }
	}
}