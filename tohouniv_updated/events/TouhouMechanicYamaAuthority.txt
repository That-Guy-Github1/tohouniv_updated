##########################################
# Events for the Yama Authority
#########################################

namespace = th_yama_authority_event

#Judgement of the Dead - Eastern and Touhou rulers
country_event = {
	id = th_yama_authority_event.1
	title = th_yama_authority_event.1.t
	desc = th_yama_authority_event.1.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1.a
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = th_yama_authority_event.1.a
		trigger = { has_country_flag = th_can_gets_special_options_for_judgement }
		ai_chance = {
			factor = 1
		}
	}
}

#Judgement of the Dead - Dharmic rulers
country_event = {
	id = th_yama_authority_event.2
	title = th_yama_authority_event.2.t
	desc = th_yama_authority_event.2.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.2.a
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = th_yama_authority_event.2.a
		trigger = { has_country_flag = th_can_gets_special_options_for_judgement }
		ai_chance = {
			factor = 1
		}
	}
}

#Judgement of the Dead - Abrahamic rulers
country_event = {
	id = th_yama_authority_event.3
	title = th_yama_authority_event.3.t
	desc = th_yama_authority_event.3.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.3.a
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = th_yama_authority_event.3.a
		trigger = { has_country_flag = th_can_gets_special_options_for_judgement }
		ai_chance = {
			factor = 1
		}
	}
}

#Remove the lecture
country_event = {
	id = th_yama_authority_event.99
	title = none
	desc = none
	picture = EIKIBOSS_eventPicture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		is_excommunicated = yes
	}
	option = {
		excommunicate = ROOT
		ai_chance = {
			factor = 1
		}
	}
}

#Information Event for the Yama Authority
country_event = {
	id = th_yama_authority_event.100
	title = th_yama_authority_event.100.t
	desc = th_yama_authority_event.100.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.100.a

		ai_chance = {
			factor = 1
		}
	}
}

#Information Event for the rest of Gensokyo
country_event = {
	id = th_yama_authority_event.101
	title = th_yama_authority_event.101.t
	desc = th_yama_authority_event.101.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.101.a

		ai_chance = {
			factor = 1
		}
	}
}

#Count countries in Gensokyo and count approving countries
province_event = {
	id = th_yama_authority_event.102
	title = none
	desc = none
	picture = EIKIBOSS_eventPicture
	hidden = yes

	trigger = {
		province_id = 1
		event_target:YamaOfGensokyo = {
			exists = yes
		}
		OR = {
			NOT = { has_province_flag = th_counted_active_gensokyan_countries }
			had_province_flag = {
				flag = th_counted_active_gensokyan_countries
				days = 29
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		set_variable = {
			which = th_gensokyan_counter
			value = 0
		}
		set_variable = {
			which = th_approving_gensokyan_counter
			value = 0
		}
		gensokyo_continent = {
			limit = {
				is_capital = yes
			}
			ROOT = {
				change_variable = {
					which = th_gensokyan_counter
					value = 1
				}
			}
			if = {
				limit = {
					owner = {
						event_target:YamaOfGensokyo = {
							reverse_has_opinion = {
								who = PREV
								value = 100
							}
						}
					}
				}
				ROOT = {
					change_variable = {
						which = th_approving_gensokyan_counter
						value = 1
					}
				}
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Forced Balkanization
province_event = {
	id = th_yama_authority_event.103
	title = none
	desc = none
	picture = EIKIBOSS_eventPicture
	hidden = yes

	is_triggered_only = yes

	option = {
		th_return_gensokyan_provinces = yes

		ai_chance = {
			factor = 1
		}
	}
}

#Information of the reforms event triggered by the estate privileges
#Establish Lecturing
country_event = {
	id = th_yama_authority_event.1001
	title = th_yama_authority_event.1001.t
	desc = th_yama_authority_event.1001.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1001.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_establish_lecturing
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Regulate Gensokyan Conquest
country_event = {
	id = th_yama_authority_event.1002
	title = th_yama_authority_event.1002.t
	desc = th_yama_authority_event.1002.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1002.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_regulate_conquest
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Enable enforce peace
country_event = {
	id = th_yama_authority_event.1003
	title = th_yama_authority_event.1003.t
	desc = th_yama_authority_event.1003.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1003.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_enforce_peace
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Internal Higan Reform
country_event = {
	id = th_yama_authority_event.1004
	title = th_yama_authority_event.1004.t
	desc = th_yama_authority_event.1004.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1004.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_internal_higan_reform
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Gensokyan Edict
country_event = {
	id = th_yama_authority_event.1005
	title = th_yama_authority_event.1005.t
	desc = th_yama_authority_event.1005.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1005.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_gensokyan_edict
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Appoint Executor
country_event = {
	id = th_yama_authority_event.1006
	title = th_yama_authority_event.1006.t
	desc = th_yama_authority_event.1006.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1006.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_appoint_executor
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Reform the Judicative
country_event = {
	id = th_yama_authority_event.1007
	title = th_yama_authority_event.1007.t
	desc = th_yama_authority_event.1007.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1007.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_reform_the_judicative
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Laws of War
country_event = {
	id = th_yama_authority_event.1008
	title = th_yama_authority_event.1008.t
	desc = th_yama_authority_event.1008.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1008.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_establish_laws_of_war
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Establish Shrine Purpose
country_event = {
	id = th_yama_authority_event.1009
	title = th_yama_authority_event.1009.t
	desc = th_yama_authority_event.1009.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1009.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_tighten_gensokyan_defense
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Centralize Gensokyan Authority
country_event = {
	id = th_yama_authority_event.1010
	title = th_yama_authority_event.1010.t
	desc = th_yama_authority_event.1010.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1010.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_centralize_gensokyan_authority
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Expand Roles
country_event = {
	id = th_yama_authority_event.1011
	title = th_yama_authority_event.1011.t
	desc = th_yama_authority_event.1011.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1011.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_expand_roles
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Sphere of Influence - Info
country_event = {
	id = th_yama_authority_event.1012
	title = th_yama_authority_event.1012.t
	desc = th_yama_authority_event.1012.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1012.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_sphere_of_influence
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Sphere of Influence
country_event = {
	id = th_yama_authority_event.1013
	title = th_yama_authority_event.1013.t
	desc = th_yama_authority_event.1013.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {	#Peace shall finally come into Gensokyo!
		name = th_yama_authority_event.1013.a
		trigger = {
			ai = yes
		}
		if = {
			limit = {
				is_subject_of = FROM
			}
			grant_independence = yes
		}
		FROM = {
			create_subject = {
				subject_type = th_yama_sphere_of_influence
				subject = ROOT
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					is_rival = FROM
					is_enemy = FROM
				}
			}
			modifier = {
				factor = 0
				was_player = yes
			}
		}
	}

	option = {	#Nobody can tell us what we are allowed to do!
		name = th_yama_authority_event.1013.b

		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { is_rival = FROM }
				NOT = { is_enemy = FROM }
			}
		}
	}
}

#Eternal Peace - Info
country_event = {
	id = th_yama_authority_event.1014
	title = th_yama_authority_event.1014.t
	desc = th_yama_authority_event.1014.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1014.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_eternal_peace
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Eternal Peace Delegation
country_event = {
	id = th_yama_authority_event.1015
	title = th_yama_authority_event.1015.t
	desc = th_yama_authority_event.1015.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {	#Peace shall finally come into Gensokyo!
		name = th_yama_authority_event.1015.a
		trigger = {
			ai = yes
		}
		if = {
			limit = {
				is_subject_of = FROM
			}
			grant_independence = yes
		}
		FROM = {
			create_subject = {
				subject_type = th_yama_subject_to_law
				subject = ROOT
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					is_rival = FROM
					is_enemy = FROM
				}
			}
			modifier = {
				factor = 0
				was_player = yes
			}
		}
	}

	option = {	#Nobody can tell us what we are allowed to do!
		name = th_yama_authority_event.1015.b

		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { is_rival = FROM }
				NOT = { is_enemy = FROM }
			}
		}
	}
}

#Unite Gensokyo - Info
country_event = {
	id = th_yama_authority_event.1016
	title = th_yama_authority_event.1016.t
	desc = th_yama_authority_event.1016.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {
		name = th_yama_authority_event.1016.a
		tooltip = {
			FROM = {
				set_estate_privilege = th_estate_yama_unite_gensokyo
			}
		}

		ai_chance = {
			factor = 1
		}
	}
}

#Unite Gensokyo - Annex Event
country_event = {
	id = th_yama_authority_event.1017
	title = th_yama_authority_event.1017.t
	desc = th_yama_authority_event.1017.desc
	picture = EIKIBOSS_eventPicture

	is_triggered_only = yes

	option = {	#All hail the Yama!
		name = th_yama_authority_event.1017
		trigger = {
			ai = yes
		}
		FROM = {
			inherit = ROOT
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					is_rival = FROM
					is_enemy = FROM
				}
			}
			modifier = {
				factor = 0
				was_player = yes
			}
		}
	}

	option = {	#We will never be anyone's slave!
		name = th_yama_authority_event.1017.b

		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { is_rival = FROM }
				NOT = { is_enemy = FROM }
			}
		}
	}
}