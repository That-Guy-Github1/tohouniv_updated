########################################
# Flavor Events for Higan
########################################

namespace = flavor_hig

#The many privileges of the Shinigami
country_event = {
	id = flavor_hig.1
	title = flavor_hig.1.t
	desc = flavor_hig.1.desc
	picture = KOMACHI_eventPicture
	fire_only_once = yes
	trigger = {
		th_is_or_was_tag = {
			tag = HIG
		}
		NOT = { has_country_flag = hig_has_dealt_with_slacking_komachi }
		has_estate_privilege = th_estate_nobles_slacking_shinigami
	}
	
	mean_time_to_happen = {
		months = 1
	}
	
	option = {
		name = flavor_hig.1.a

		ai_chance = { 
			factor = 100
		}
	}
}

#Hellish Union - split land apart if they have provinces outside the allowed region
country_event = {
	id = flavor_hig.2
	title = flavor_hig.2.t
	desc = flavor_hig.2.desc
	picture = SATORIOFFICE_eventPicture
	trigger = {
		NOT = { has_country_flag = hig_crd_release_event }
		NOT = { has_country_flag = th_has_no_penalty_from_owning_gensokyan_land }
		th_is_or_was_tag = {
			tag = HIG
		}
		any_subject_country = {
			th_is_or_was_tag = {
				tag = CRD
			}
			any_owned_province = {
				continent = gensokyo_continent
				NOT = { region = former_hell_region }
				NOT = { region = hell_region }
				NOT = { region = netherworld_region }
				NOT = { area = Konngaras_state }
			}
		}
	}
	
	mean_time_to_happen = {
		months = 1
	}

	immediate = {
		hidden_effect = {
			set_country_flag = hig_crd_release_event
			random_subject_country = {
				limit = {
					th_is_or_was_tag = {
						tag = CRD
					}
				}
				save_event_target_as = hig_subject_country
			}
		}
	}
	
	option = {	#Return all non-hell provinces in Gensokyo
		name = flavor_hig.2.a
		event_target:hig_subject_country = {
			th_return_gensokyan_provinces = yes
		}
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = 10
		}

		ai_chance = { 
			factor = 100
		}
	}
	
	option = {	#No
		name = flavor_hig.2.b
		add_estate_loyalty = {
			estate = estate_yama
			loyalty = -25
		}

		ai_chance = { 
			factor = 0
		}
	}
}

#Hellish Union
country_event = {
	id = flavor_hig.3
	title = flavor_hig.3.t
	desc = flavor_hig.3.desc
	picture = SATORIOFFICE_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.3.a

		ai_chance = { 
			factor = 100
		}
	}
	
	option = {
		name = flavor_hig.3.b

		ai_chance = { 
			factor = 100
		}
	}
}

#Appointing of the Shrine Maiden Denfender
country_event = {
	id = flavor_hig.4
	title = flavor_hig.4.t
	desc = flavor_hig.4.desc
	picture = GENSOKYOTHRONE_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.4.a

		ai_chance = { 
			factor = 100
		}
	}
}

#Remove Tenshi from HVR
country_event = {
	id = flavor_hig.5
	title = flavor_hig.5.t
	desc = flavor_hig.5.desc
	picture = TENSHI_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.5.a

		ai_chance = { 
			factor = 100
		}
	}
}

#Judgement of the Gang Leaders
country_event = {
	id = flavor_hig.6
	title = flavor_hig.6.t
	desc = flavor_hig.6.desc
	picture = TENSHI_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.6.a

		ai_chance = { 
			factor = 100
		}
	}
}

#Kutaka and the Gang Leaders
country_event = {
	id = flavor_hig.7
	title = flavor_hig.7.t
	desc = flavor_hig.7.desc
	picture = KUTAKA_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.7.a
		GGS = {
			grant_independence = yes
		}
		create_subject = {
			subject_type = vassal
			subject = GGS
		}
		ai_chance = { 
			factor = 100
		}
	}
}

#Fortification of the Hell Borders
country_event = {
	id = flavor_hig.8
	title = flavor_hig.8.t
	desc = flavor_hig.8.desc
	picture = KUTAKA_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.8.a
		
		ai_chance = { 
			factor = 100
		}
	}
}

#Yukari and the High Judge
country_event = {
	id = flavor_hig.9
	title = flavor_hig.9.t
	desc = flavor_hig.9.desc
	picture = GENSOKYOTHRONE_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.9.a
		
		ai_chance = { 
			factor = 100
		}
	}
}

#Handling of the Immortals
country_event = {
	id = flavor_hig.10
	title = flavor_hig.10.t
	desc = flavor_hig.10.desc
	picture = KAGUYAVSMOKOUFUN_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.10.a
		
		ai_chance = { 
			factor = 100
		}
	}
}

#Hecatia returns to Higan - HEC
country_event = {
	id = flavor_hig.11
	title = flavor_hig.11.t
	desc = flavor_hig.11.desc
	picture = KAGUYAVSMOKOUFUN_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.11.a
		
		ai_chance = { 
			factor = 100
		}
	}

	after = {
		random_country = {
			limit = {
				has_country_flag = hig_has_return_hecatia_war_cb_flag
			}
			country_event = {
				id = flavor_hig.12
			}
		}
	}
}

#Hecatia returns to Higan - HIG
country_event = {
	id = flavor_hig.12
	title = flavor_hig.12.t
	desc = flavor_hig.12.desc
	picture = KAGUYAVSMOKOUFUN_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.12.a
		hidden_effect = {
			clr_country_flag = hig_has_return_hecatia_war_cb_flag
		}
		
		ai_chance = { 
			factor = 100
		}
	}
}

#The Importance of the Sanzu River
country_event = {
	id = flavor_hig.13
	title = flavor_hig.13.t
	desc = flavor_hig.13.desc
	picture = HIGAN_eventPicture
	is_triggered_only = yes
	
	option = {
		name = flavor_hig.13.a
		
		ai_chance = { 
			factor = 100
		}
	}
}

#Hire Komachi
country_event = {
	id = flavor_hig.102
	title = flavor_hig.102.t
	desc = flavor_hig.102.desc
	picture = KOMACHI_eventPicture
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = th_hired_komachi_modifier
				duration = 10950
				hidden = yes
			}
		}
	}
	
	option = {	#Advisor Komachi
		name = flavor_hig.102.a
		define_advisor = {
			type = th_advisor_komachi
			name = "Komachi Onozuka"
			skill = 3
			location = 4969
			discount = yes
			female = yes
			culture = Higanean
			religion = ROOT
		}
		
		ai_chance = { 
			factor = 0
		}
	}
	
	option = {	#General Komachi
		name = flavor_hig.102.b
		define_general = {
			name = "Komachi Onozuka"
			shock = 6
			fire = 6
			manuever = 6
			siege = 4
			female = yes
			trait = goal_oriented_personality
		}
		
		
		ai_chance = { 
			factor = 1
			modifier = {
				factor = 100
				is_at_war = yes
			}
		}
	}
}