########################################
# Flavor Events for Eternity Garden
########################################

namespace = flavor_lar

#Larva's Potential
country_event = {
	id = flavor_lar.1
	title = flavor_lar.1.t
	desc = flavor_lar.1.desc
	picture = ETERNITY_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_lar.1.a

		add_ruler_modifier = {
			name = lar_lost_in_thoughts
			duration = 9125
		}

		ai_chance = { 
			factor = 100
		}
	}
}

#The orange flower reacts to Larva
country_event = {
	id = flavor_lar.2
	title = flavor_lar.2.t
	desc = flavor_lar.2.desc
	picture = FLOWERS_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_lar.2.a		
		add_prestige = 25
		th_increase_fairy_mil_stat = {
			mil = 1
		}

		ai_chance = { 
			factor = 100
		}
	}
}

#Larva meets Yuyuko
country_event = {
	id = flavor_lar.3
	title = flavor_lar.3.t
	desc = flavor_lar.3.desc
	picture = SAIGYOU_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_lar.3.a
		add_dip_power = 100
		th_increase_fairy_dip_stat = {
			dip = 1
		}

		ai_chance = { 
			factor = 100
		}
	}
}

#Larva and the squad marches into Eientei
country_event = {
	id = flavor_lar.4
	title = flavor_lar.4.t
	desc = flavor_lar.4.desc
	picture = KAGUYA_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_lar.4.a
		
		th_increase_fairy_adm_stat = {
			adm = 1
		}

		ai_chance = { 
			factor = 100
		}
	}
}

#Larva becomes a goddess
country_event = {
	id = flavor_lar.5
	title = flavor_lar.5.t
	desc = flavor_lar.5.desc
	picture = ETERNITYGODDESS_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_lar.5.a
		if = {
			limit = {
				NOT = { government = monarchy }
			}
			change_government = monarchy
		}
		add_government_reform = Gensokyan_lar_divine_government
		if = {
			limit = {
				NOT = { government_rank = 3 }
			}
			set_government_rank = 3
		}
		th_increase_fairy_adm_stat = {
			adm = 1
		}
		th_increase_fairy_mil_stat = {
			mil = 1
		}

		ai_chance = { 
			factor = 100
		}
	}
}

########################################
# Larva Deity Events
########################################

#Eternal Warriors
country_event = {
	id = flavor_lar.6
	title = flavor_lar.6.t
	desc = flavor_lar.6.desc
	picture = ETERNITYGODDESS_eventPicture

	trigger = {
		has_reform = Gensokyan_lar_divine_government
		OR = {
			NOT = { has_country_flag = lar_had_larva_deity_event }
			had_country_flag = {
				flag = lar_had_larva_deity_event
				days = 1460
			}
		}
		NOT = { has_country_flag = th_deity_penalty_active }
		NOT = { has_country_flag = th_having_a_deity_event }
		is_at_war = yes
		NOT = { has_country_modifier = th_deity_eternal_warriors }
	}

	immediate = {
		clr_country_flag = lar_had_larva_deity_event
		set_country_flag = th_having_a_deity_event
	}

	after = {
		set_country_flag = lar_had_larva_deity_event
		clr_country_flag = th_having_a_deity_event
	}
	
	mean_time_to_happen = {
		months = 24
	}
	
	option = {
		name = flavor_lar.6.a
		add_country_modifier = {
			name = th_deity_eternal_warriors
			duration = 1825
		}
		add_war_exhaustion = 1
	}
	
	option = {
		name = flavor_lar.6.b
		add_war_exhaustion = -2
	}
}

#Inner focus / outer focus
country_event = {
	id = flavor_lar.7
	title = flavor_lar.7.t
	desc = flavor_lar.7.desc
	picture = ETERNITYGODDESS_eventPicture

	trigger = {
		has_reform = Gensokyan_lar_divine_government
		OR = {
			NOT = { has_country_flag = lar_had_larva_deity_event }
			had_country_flag = {
				flag = lar_had_larva_deity_event
				days = 1460
			}
		}
		NOT = { has_country_flag = th_deity_penalty_active }
		NOT = { has_country_flag = th_having_a_deity_event }
		NOT = { has_country_modifier = th_deity_inner_focus }
		NOT = { has_country_modifier = th_deity_outer_focus }
		NOT = { has_country_modifier = th_deity_balanced_focus }
	}

	immediate = {
		clr_country_flag = lar_had_larva_deity_event
		set_country_flag = th_having_a_deity_event
	}

	after = {
		set_country_flag = lar_had_larva_deity_event
		clr_country_flag = th_having_a_deity_event
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	option = {	#Inner Focus
		name = flavor_lar.7.a
		add_country_modifier = {
			name = th_deity_inner_focus
			duration = 1825
		}
	}
	
	option = {	#Outer Focus
		name = flavor_lar.7.b
		add_country_modifier = {
			name = th_deity_outer_focus
			duration = 1825
		}
	}
	
	option = {	#Balanced Focus
		name = flavor_lar.7.c
		add_country_modifier = {
			name = th_deity_balanced_focus
			duration = 1825
		}
		add_years_of_income = 0.1
		ai_chance = {
			factor = 100
		}
	}
}

#Larva and the estates
country_event = {
	id = flavor_lar.8
	title = flavor_lar.8.t
	desc = flavor_lar.8.desc
	picture = ETERNITYGODDESS_eventPicture

	trigger = {
		has_reform = Gensokyan_lar_divine_government
		OR = {
			NOT = { has_country_flag = lar_had_larva_deity_event }
			had_country_flag = {
				flag = lar_had_larva_deity_event
				days = 1460
			}
		}
		NOT = { has_country_flag = th_deity_penalty_active }
		NOT = { has_country_flag = th_having_a_deity_event }
	}

	immediate = {
		clr_country_flag = lar_had_larva_deity_event
		set_country_flag = th_having_a_deity_event
	}

	after = {
		set_country_flag = lar_had_larva_deity_event
		clr_country_flag = th_having_a_deity_event
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	option = {	#Shrine Maidens
		name = flavor_lar.8.a
		change_estate_land_share = {
			estate = estate_church
			share = 5
		}
		add_absolutism = -10
		add_adm_power = 100
	}
	
	option = {	#Burghers
		name = flavor_lar.8.b
		change_estate_land_share = {
			estate = estate_burghers
			share = 5
		}
		add_absolutism = -10
		add_dip_power = 100
	}
	
	option = {	#Youkais
		name = flavor_lar.8.c
		change_estate_land_share = {
			estate = estate_nobles
			share = 5
		}
		add_absolutism = -10
		add_mil_power = 100
	}
	
	option = {	#Crown
		name = flavor_lar.8.d
		change_estate_land_share = {
			estate = estate_church
			share = -1
		}
		change_estate_land_share = {
			estate = estate_burghers
			share = -1
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -1
		}
		add_absolutism = 5
	}
}

#Production Money
country_event = {
	id = flavor_lar.9
	title = flavor_lar.9.t
	desc = flavor_lar.9.desc
	picture = ETERNITYGODDESS_eventPicture

	trigger = {
		has_reform = Gensokyan_lar_divine_government
		OR = {
			NOT = { has_country_flag = lar_had_larva_deity_event }
			had_country_flag = {
				flag = lar_had_larva_deity_event
				days = 1460
			}
		}
		NOT = { has_country_flag = th_deity_penalty_active }
		NOT = { has_country_flag = th_having_a_deity_event }
	}

	immediate = {
		clr_country_flag = lar_had_larva_deity_event
		set_country_flag = th_having_a_deity_event
	}

	after = {
		set_country_flag = lar_had_larva_deity_event
		clr_country_flag = th_having_a_deity_event
	}
	
	mean_time_to_happen = {
		months = 24
	}
	
	option = {	#Textile Money
		name = flavor_lar.9.a
		trigger = {
			any_owned_province = {
				OR = {
					trade_goods = cloth
					trade_goods = silk
				}
				NOT = { has_province_modifier = estate_burghers_monopoly_of_textiles_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_textiles
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				OR = {
					trade_goods = cloth
					trade_goods = silk
				}
			}
			custom_tooltip = MONOPOLY_INCOME_CLOTH_DESC
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {	#Dyes Money
		name = flavor_lar.9.b
		trigger = {
			any_owned_province = {
				trade_goods = dyes
				NOT = { has_province_modifier = estate_burghers_monopoly_of_dyes_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_dyes
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				trade_goods = dyes
			}
			custom_tooltip = MONOPOLY_INCOME_DYE_DESC
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {	#Glass Money
		name = flavor_lar.9.c
		trigger = {
			any_owned_province = {
				trade_goods = glass
				NOT = { has_province_modifier = estate_burghers_monopoly_of_glass_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_glass
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				trade_goods = glass
			}
			custom_tooltip = MONOPOLY_INCOME_GLASS_DESC
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {	#Paper Money
		name = flavor_lar.9.d
		trigger = {
			any_owned_province = {
				trade_goods = paper
				NOT = { has_province_modifier = estate_burghers_monopoly_of_paper_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_paper
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				trade_goods = paper
			}
			custom_tooltip = MONOPOLY_INCOME_PAPER_DESC
		}
	}
	
	option = {	#Metals Money
		name = flavor_lar.9.e
		trigger = {
			any_owned_province = {
				OR = {
					trade_goods = iron
					trade_goods = copper
				}
				NOT = { has_province_modifier = estate_nobles_monopoly_of_metals_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_metals
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				OR = {
					trade_goods = iron
					trade_goods = copper
				}
			}
			custom_tooltip = MONOPOLY_INCOME_IRON_DESC
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {	#Lifestock Money
		name = flavor_lar.9.f
		trigger = {
			any_owned_province = {
				trade_goods = livestock
				NOT = { has_province_modifier = estate_nobles_monopoly_of_livestock_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_lifestock
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				trade_goods = livestock
			}
			custom_tooltip = MONOPOLY_INCOME_LIVESTOCK_DESC
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {	#Gems Money
		name = flavor_lar.9.g
		trigger = {
			any_owned_province = {
				trade_goods = gems
				NOT = { has_province_modifier = estate_nobles_monopoly_of_gems_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_gems
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				trade_goods = gems
			}
			custom_tooltip = MONOPOLY_INCOME_GEMS_DESC
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {	#Incense Money
		name = flavor_lar.9.h
		trigger = {
			any_owned_province = {
				trade_goods = incense
				NOT = { has_province_modifier = estate_church_monopoly_of_incense_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_incense
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				trade_goods = incense
			}
			custom_tooltip = MONOPOLY_INCOME_INCENSE_DESC
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {	#Wool Money
		name = flavor_lar.9.i
		trigger = {
			any_owned_province = {
				trade_goods = wool
				NOT = { has_province_modifier = estate_church_monopoly_of_wool_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_wool
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				trade_goods = wool
			}
			custom_tooltip = MONOPOLY_INCOME_WOOL_DESC
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {	#Wine Money
		name = flavor_lar.9.j
		trigger = {
			any_owned_province = {
				trade_goods = wine
				NOT = { has_province_modifier = estate_church_monopoly_of_wine_mod }
			}
		}
		add_country_modifier = {
			name = th_deity_tribute_wine
			duration = 1825
		}
		add_years_of_owned_provinces_production_income = {
			years = 1
			trigger = {
				trade_goods = wine
			}
			custom_tooltip = MONOPOLY_INCOME_WINE_DESC
		}
		ai_chance = {
			factor = 100
		}
	}
	
	option = {
		name = flavor_lar.9.k
		add_years_of_income = -0.2
		add_stability_or_adm_power = yes
	}
}