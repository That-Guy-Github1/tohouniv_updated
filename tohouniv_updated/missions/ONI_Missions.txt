oni_missions_army_slot = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_build_army = {
		icon = mission_assemble_an_army
		required_missions = {  }
		position = 1
		trigger = {
			army_size_percentage = 1
			has_mil_advisor = yes
		}
		effect = {
			add_country_modifier = {
				name = oni_build_army
				duration = 7300
			}
			create_general = {
				tradition = 40
			}
		}
	}

	ONI_organize_army = {
		icon = mission_touhou_army
		required_missions = { ONI_build_army }
		position = 2
		trigger = {
			has_idea = ONI_drunken_revelry
			if = {
				limit = {
					has_dlc = "Cradle of Civilization"
				}
				army_professionalism = 0.20
			}
			else = {
				has_global_modifier_value = {
					which = discipline
					value = 0.1
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_organized_army
				duration = -1
			}
		}
	}
	
	ONI_gathering_merc = {
		icon = touhou_assemble_army
		required_missions = { ONI_organize_army }
		position = 3
		trigger = {
			if = {
				limit = {
					has_dlc = "Cradle of Civilization"
				}
				army_professionalism = 0.40
			}
			any_hired_mercenary_company = {
				template = merc_th_oni_warriors
			}
			is_in_deficit = no
			owns_core_province = 5008
		}
		effect = {
			custom_tooltip = ONI_gathering_merc_tt
			set_country_flag = oni_has_completed_merc_mission
			hidden_effect = {
				set_variable = {
					which = oni_won_battles_counter
					value = 0
				}
			}
		}
	}
	
	ONI_ruler_honor = {
		icon = mission_touhou_yuugi_warrior
		required_missions = { ONI_gathering_merc }
		position = 4
		trigger = {
			if = {
				limit = {
					mission_completed = ONI_gathering_merc
				}
				custom_trigger_tooltip = {
					tooltip = ONI_ruler_honor_tt
					check_variable = {
						which = oni_won_battles_counter
						value = 20
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = ONI_ruler_honor_at
					always = no
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_ruler_autonomy
				duration = -1
			}
		}
	}
}

oni_missions_conquest_slot = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_subjugate_kappa = {
		icon = mission_touhou_kappas
		required_missions = { ONI_reclaim_mountain }
		position = 5
		provinces_to_highlight = {
			OR = {
				area = Kappa_state
				area = Kappa_delta
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				OR = {
					area = Kappa_state
					area = Kappa_delta
				}
				value = 5
			}
			owns_or_non_sovereign_subject_of = 4965
		}
		effect = {
			add_country_modifier = {
				name = oni_kappa_technology
				duration = 9125
			}
		}
	}

	
	ONI_miracle_mallet = {
		icon = mission_miracle_mallet
		required_missions = { ONI_establish_onigashima }
		position = 6
		provinces_to_highlight = {
			area = Shining_needle_state
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			Shining_needle_state = {
				country_or_non_sovereign_subject_holds = ROOT
				type = all
			}
		}
		effect = {
			add_years_of_income = 1
			add_adm_power = 100
			add_dip_power = 100
			add_mil_power = 100
		}
	}
	
	ONI_beat_vampire = {
		icon = mission_touhou_remilia
		required_missions = { ONI_powers_gensokyo }
		position = 8
		trigger = {
			OR = {
				AND = {
					NOT = { exists = SCR }
					NOT = { exists = SCD }
					Scarlet_island = {
						owned_by = ROOT
						type = all
					}
				}
				if = {
					limit = {
						exists = SCD
					}
					SCD = {
						is_subject_of = ROOT
					}
				}
				else = {
					SCR = {
						is_subject_of = ROOT
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_beat_vampire
				duration = 9125
			}
		}
	}
}

oni_missions_ally_slot = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_get_ally = {
		icon = mission_alliances
		required_missions = {  }
		position = 1
		trigger = {
			num_of_allies = 2
		}
		effect = {
			add_country_modifier = {
				name = oni_diplomacy
				duration = 7300
			}
		}
	}
}

ONI_missions_chireiden_slot = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_diplomacy_or_war = {
		icon = mission_touhou_satori2
		required_missions = { ONI_relation_chireiden }
		position = 2
		provinces_to_highlight = {
			OR = {
				province_id = 5009
				province_id = 5284
				province_id = 5285
				province_id = 5007
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			OR = {
				AND = {
					owns_core_province = 5009
					owns_core_province = 5284			
					owns_core_province = 5285	
				}
				AND = {
					war_with = CRD
					war_score = 80
					if = {
						limit = {
							5007 = { owned_by = CRD }
						}
						controls = 5007
					}
				}
				AND = {
					NOT = {
						war_with = CRD
					}
					reverse_has_opinion = {
						who = CRD
						value = 120
					}
					treasury = 600
				}
			}
		}
		effect = {
			Southern_youkai_mountains = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}
			Youkai_Mountains = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}
			if = {
				limit = {
					war_with = CRD
				}
				country_event = {
					id = flavor_oni.3
				}
			}
			else_if = {
				limit = {
					AND = {
						reverse_has_opinion = {
							who = CRD
							value = 120
						}
						treasury = 600
					}
				}
				country_event = {
					id = flavor_oni.2
				}
			}
			else_if = {
				limit = {
					owns_core_province = 5009
					owns_core_province = 5284			
					owns_core_province = 5285
				}
				add_adm_power = 100
				add_dip_power = 100
				add_mil_power = 100
			}
			else = {
				custom_tooltip = ONI_diplomacy_or_war_tt			
			}
		}
	}
}

oni_missions_onigashima_slot = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	ONI_comeback_mountain = {
		icon = mission_touhou_aya
		required_missions = { ONI_diplomacy_or_war }
		position = 3
		provinces_to_highlight = {
			OR = {
				area = Youkai_Mountains
				area = Southern_youkai_mountains
			}
			NOT = { owned_by = ROOT }
		}
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				OR = {
					area = Youkai_Mountains
					area = Southern_youkai_mountains
				}
			}
			4963 = {
				owned_by = ROOT
			}
		}
		effect = {
			youkai_mountain_region = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}
		}
	}
	
	ONI_reclaim_mountain = {
		icon = mission_touhou_youkai_mountain
		required_missions = { ONI_comeback_mountain }
		position = 4
		provinces_to_highlight = {
			region = youkai_mountain_region
			NOT = { owned_by = ROOT }
		}
		trigger = {
			4963 = {
				owned_by = ROOT
			}
			4964 = {
				owned_by = ROOT
			}
			OR = {
				AND = {
					num_of_owned_provinces_with = {
						value = 12
						region = youkai_mountain_region
					}
					NOT = { exists = TGU }
				}
				youkai_mountain_region = {
					owned_by = ROOT
					type = all
				}
			}
		}
		effect = {
			th_increase_ruler_mil_stat = {
				mil = 1
			}
			Kappa_state = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			Kappa_delta = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_casus_belli = {
				target = KPP
				type = cb_vassalize_mission
				months = 900
			}
		}
	}
	
	ONI_establish_onigashima = {
		icon = mission_touhou_yuugisuika
		required_missions = { 
			ONI_reclaim_mountain
			ONI_join_kasen
		}
		position = 5
		trigger = {
			4964 = {
				owned_by = ROOT
				is_core = ROOT
			}
			stability = 1
			OR = {
				reform_level = 4
				has_reform = TH_oni_bureaucracy_reform
			}
		}
		effect = {
			country_event = {
				id = flavor_oni.7
			}
			Senkai_state = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			Eastern_senkai = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			Northern_senkai = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					5014 = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
				}
				5014 = {
					add_permanent_claim = ROOT
				}
			}
			Shining_needle_state = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

oni_missions_gensokyo_slot = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_powers_gensokyo = {
		icon = mission_touhou_battle_cry
		required_missions = { ONI_establish_onigashima }
		position = 7
		trigger = {
			if = {
				limit = {
					exists = SCD
				}
				OR = {
					total_development = SCD
					is_rival = SCD
					SCD = {
						OR = {
							is_rival = ROOT
							is_subject_of = ROOT
						}
					}
					NOT = { exists = SCD }
				}
			}
			if = {
				limit = {
					exists = SCR
				}
				OR = {
					total_development = SCR
					is_rival = SCR
					SCR = {
						OR = {
							is_rival = ROOT
							is_subject_of = ROOT
						}
					}
					NOT = { exists = SCR }
				}
			}
			if = {
				limit = {
					exists = LEM
					NOT = { exists = LCU }
				}
				OR = {
					total_development = LEM
					is_rival = LEM
					LEM = {
						OR = {
							is_rival = ROOT
							is_subject_of = ROOT
						}
					}
					NOT = { exists = LEM }
				}
			}
			if = {
				limit = {
					exists = LCU
				}
				OR = {
					total_development = LCU
					is_rival = LCU
					LCU = {
						OR = {
							is_rival = ROOT
							is_subject_of = ROOT
						}
					}
					NOT = { exists = LCU }
				}
			}

			OR = {
				total_development = SFF
				is_rival = SFF
				SFF = {
					OR = {
						is_rival = ROOT
						is_subject_of = ROOT
					}
				}
				NOT = { exists = SFF }
			}
		}
		effect = {
			Sunny_plains = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			Perfect_cut_coast = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			Western_moon_state = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			Southern_moon_state = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			Scarlet_island = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			Scarlet_mountain = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			Scarlett_domain = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_casus_belli = {
				target = SCR
				type = cb_vassalize_mission
				months = 900
			}
		}
	}

	
	ONI_beat_yuuka = {
		icon = mission_touhou_yuuka_ominous
		required_missions = { ONI_powers_gensokyo }
		position = 8
		trigger = {
			OR = {
				AND = {
					NOT = { exists = SFF }
					5152 = {
						country_or_non_sovereign_subject_holds = ROOT
					}
					5156 = {
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
				AND = {
					war_with = SFF
					war_score = 90
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_beat_yuuka
				duration = 9125
			}
		}
	}
	
	ONI_gensokyo_champion = {
		icon = mission_touhou_suika2
		required_missions = { 
			ONI_beat_vampire
			ONI_beat_yuuka
			ONI_beat_lunarian
		}
		position = 9
		trigger = {
			custom_trigger_tooltip = {
				tooltip = ONI_gensokyo_champion_tt
				NOT = {
					any_country = {
						capital_scope = {
							continent = gensokyo_continent
						}
						total_own_and_non_tributary_subject_development = ROOT
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_gensokyo_champion
				duration = -1
			}
		}
	}
}

oni_missions_big_four_slot = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_relation_chireiden = {
		icon = mission_touhou_chireiden
		required_missions = {  }
		position = 1
		trigger = {
			OR = {
				AND = {
					is_subject_of_type = tributary_state
					reverse_has_opinion = {
						who = CRD
						value = 100
					}
				}
				AND = {
					NOT = {
						is_subject_of_type = tributary_state
					}
					is_subject = no
					CRD = {
						has_been_insulted_by_root = yes
					}					
				}
				total_development = CRD
			}
		}
		effect = {
			if = {
				limit = {
					reverse_has_opinion = {
						who = CRD
						value = 100
					}			
				}
				add_country_modifier = {
					name = oni_diplo_chireiden
					duration = 5475
				}
			}
			else_if = {
				limit = {
					NOT = {
						is_subject_of_type = tributary_state
					}
					is_subject = no
					CRD = {
						has_been_insulted_by_root = yes
					}	
				}
				Road_to_hell_state = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
				Chireiden_canal_state = {
					limit = {
						NOT = { is_permanent_claim = ROOT }
						NOT = { is_core = ROOT }
					}
					add_permanent_claim = ROOT
				}
				CRD = {
					country_event = {
						id = flavor_oni.1
					}
				}
			}
			else_if = {
				limit = {
					total_development = CRD
				}
				country_event = {
					id = flavor_oni.102
				}			
			}
			else = {
				custom_tooltip = ONI_relation_chireiden_tt			
			}
		}
	}

	ONI_find_suika = {
		icon = mission_touhou_suika
		required_missions = { ONI_develop_brewery }
		position = 2
		provinces_to_highlight = {
			if = {
				limit = {
					HKR = {
						OR = {
							has_country_flag = hkr_met_suika
							has_country_flag = th_suika_is_ruler
						}
					}
				}
				province_id = 5057
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
			else = {
				OR = {
					province_id = 4955
					province_id = 4989
					province_id = 4978
				}
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
		trigger = {
			if = {
				limit = {
					HKR = {
						OR = {
							has_country_flag = hkr_met_suika
							has_country_flag = th_suika_is_ruler
						}
					}
				}
				OR = {
					reverse_has_opinion = {
						who = HKR
						value = 150
					}
					5057 = {
						owned_by = ROOT
					}
				}
			}
			else = {
				advisor = spymaster
				4955 = {
					OR = {
						owned_by = ROOT
						owner = {
							has_spy_network_from = {
								who = ROOT
								value = 20
							}
						}
					}
				}
				4989 = {
					OR = {
						owned_by = ROOT
						owner = {
							has_spy_network_from = {
								who = ROOT
								value = 20
							}
						}
					}
				}
				4978 = {
					OR = {
						owned_by = ROOT
						owner = {
							has_spy_network_from = {
								who = ROOT
								value = 20
							}
						}
					}
				}
			}
		}
		effect = {			
			if = {
				limit = {
					HKR = {
						OR = {
							has_country_flag = hkr_met_suika
							has_country_flag = th_suika_is_ruler
						}
					}
				}
				country_event = {
					id = flavor_oni.5
				}				
			}
			else = {
				country_event = {
					id = flavor_oni.4
				}						
			}
		}
	}
	
	ONI_mountain_hermit = {
		icon = mission_touhou_kasen
		required_missions = { ONI_find_suika }
		position = 3
		trigger = {
			OR = {
				reverse_has_opinion = {
					who = KSE
					value = 100
				}
				NOT = { exists = KSE }
			}
		}
		effect = {
			th_increase_ruler_dip_stat = {
				dip = 1
			}
		}
	}
	
	ONI_join_kasen = {
		icon = mission_touhou_ibaraki
		required_missions = { ONI_mountain_hermit }
		position = 4
		provinces_to_highlight = {
			province_id = 5191
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			owns_or_non_sovereign_subject_of = 5191
			KSE = {
				OR = {
					AND = {
						is_subject_of = ROOT
						NOT = { total_development = 100 }
					}
					exists = no
				}
			}
		}
		effect = {
			country_event = {
				id = flavor_oni.6
			}
		}
	}
}

oni_missions_empire_slot = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_onigashima_empire = {
		icon = mission_touhou_onigashima
		required_missions = {  }
		position = 5
		trigger = {
			if = {
				limit = {
					mission_completed = ONI_establish_onigashima
				}
				has_reform = Gensokyan_oni_brawling_kingdom
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = ONI_onigashima_empire_tt
					always = no
				}
			}
			total_development = 800
			army_size = 150
		}
		effect = {
			add_country_modifier = {
				name = oni_onigashima_empire
				duration = -1
			}
			if = {
				limit = {
					NOT = {
						government_rank = 3
					}
				}
				set_government_rank = 3
			}
		}
	}

	ONI_arrest_seiga = {
		icon = mission_touhou_seiga
		required_missions = { ONI_establish_onigashima }
		position = 6
		provinces_to_highlight = {
			OR = {
				province_id = 5014
				province_id = 5174
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			NOT = { controlled_by = ROOT }
		}
		trigger = {
			OR = {
				owns_or_non_sovereign_subject_of = 5014
				controls = 5014
			}
			OR = {
				owns_or_non_sovereign_subject_of = 5174
				controls = 5174
			}
		}
		effect = {
			country_event = {
				id = flavor_oni.8
			}
		}
	}
	
	ONI_beat_lunarian = {
		icon = mission_touhou_lunarian_throne
		required_missions = { ONI_powers_gensokyo }
		position = 8
		trigger = {
			OR = {
				AND = {
					NOT = { exists = LEM }
					NOT = { exists = LCU }
					5320 = {
							country_or_non_sovereign_subject_holds = ROOT
					}
				}
				if = {
					limit = {
						exists = LEM
					}
					AND = {
						war_with = LEM
						war_score = 90
					}
				}
				else = {
					AND = {
						war_with = LCU
						war_score = 90
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_beat_lunarian
				duration = 9125
			}	
		}
	}
}

oni_missions_human_slot = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_develop_brewery = {
		icon = mission_touhou_yuugi
		required_missions = {  }
		position = 1
		trigger = {
			5299 = {
				owned_by = ROOT
				base_production = 8
				OR = {
					has_building = workshop
					has_building = counting_house
				}				
			}
		}
		effect = {
			5299 = {
				add_permanent_province_modifier = {
					name = oni_sake_production
					duration = -1
				}
			}
		}
	}

	ONI_build_barrack = {
		icon = mission_touhou_former_capital
		required_missions = { ONI_develop_brewery }
		position = 2
		trigger = {
			OR = {
				barracks = 10
				training_fields = 10
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_training_soldier
				duration = 7300
			}	
		}
	}
	
	ONI_revenge_samurai = {
		icon = mission_japanese_samurai
		required_missions = { 
			ONI_find_suika
			ONI_break_the_barrier
		}
		position = 3
		provinces_to_highlight = {
			province_id = 1020
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			NOT = { controlled_by = ROOT }
		}
		trigger = {
			OR = {
				AND = {
					1020 = {
						owner = {
							war_with = ROOT
						}
					}
					war_score = 70
					controls = 1020
				}
				1020 = {
					owned_by = ROOT
					is_core = ROOT
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_revenge_samurai
				duration = 9125
			}	
			liaoning_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			hebei_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_hebei_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			shandong_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			korea_region = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

oni_missions_outworld_slot = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes

	ONI_unexplainable_phenomenon = {
		icon = mission_kowtow
		required_missions = { ONI_revenge_samurai }
		position = 4
		provinces_to_highlight = {
			OR = {
				area = liaoning_area
				area = hebei_area
				area = south_hebei_area
				area = shandong_area
				region = korea_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			AND = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					OR = {
						area = liaoning_area
						area = hebei_area
						area = south_hebei_area
						area = shandong_area
					}
					value = 10
				}
				owns_or_non_sovereign_subject_of = 1816
			}
			AND = {
				num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
					region = korea_region
					value = 5
				}
				owns_or_non_sovereign_subject_of = 735
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_unexplainable_phenomenon
				duration = -1
			}	
		}
	}

	ONI_wide_outworld = {
		icon = mission_touhou_sultan_of_the_middle_east
		required_missions = { ONI_training_ocean_navy }
		position = 5
		provinces_to_highlight = {
			OR = {
				region = arabia_region
				region = egypt_region
				region = mashriq_region
			}
			NOT = { has_discovered = ROOT }
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = th_discover_middle_east_tt
				OR = {
					arabia_region = { has_discovered = ROOT }
					egypt_region = { has_discovered = ROOT }
					mashriq_region = { has_discovered = ROOT }
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_go_west
				duration = 9125
			}
			khuzestan_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			basra_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	ONI_attack_ottoman = {
		icon = mission_ottoman_diplomacy
		required_missions = { ONI_toward_west }
		position = 7
		trigger = {
			OR = {
				AND = {
					war_with = TUR
					war_score = 80
					TUR = {
						war_exhaustion = 5
					}
					NOT = {
						war_exhaustion = 2
					}
				}
				TUR = {
					OR = {
						is_subject_of = ROOT
						exists = no
					}
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_scourge_of_scourge
				duration = 9125
			}
			france_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			south_german_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	ONI_attack_germany = {
		icon = interfere_in_germany
		required_missions = { ONI_attack_ottoman }
		position = 8
		provinces_to_highlight = {
			OR = {
				area = upper_bavaria_area
				area = lower_bavaria_area
				area = east_bavaria_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				OR = {
					area = upper_bavaria_area
					area = lower_bavaria_area
					area = east_bavaria_area
				}
				value = 6
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_german_beer
				duration = -1
			}
		}
	}
	
	ONI_terror_oni = {
		icon = mission_touhou_suikafear
		required_missions = { 
			ONI_attack_germany
			ONI_attack_france
		}
		position = 9
		trigger = {
			OR = {
				is_hegemon = yes
				custom_trigger_tooltip = {
					tooltip = ONI_capital_in_europe_asia_tt
					NOT = {
						any_country = {
							OR = {
								capital_scope = {
									continent = europe
								}
								capital_scope = {
									continent = asia
								}
							}
							NOT = { total_development = ROOT }
							NOT = { tag = ROOT }
							NOT = { is_subject_of = ROOT }
						}
					}
				}
			}
			calc_true_if = {
				all_country = {
					OR = {
						is_subject_of = ROOT
						truce_with = ROOT
					}
					custom_trigger_tooltip = {
						tooltip = ONI_capital_in_europe_asia_ct
						OR = {
							capital_scope = {
								continent = europe
							}
							capital_scope = {
								continent = asia
							}
						}
					}
				}
				amount = 15
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_terror_of_oni
				duration = -1
			}
		}
	}
}

oni_missions_navy_slot = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_form_navy = {
		icon = mission_rb_a_mighty_fleet
		required_missions = {  }
		position = 1
		trigger = {
			num_of_total_ports = 10
			navy_size_percentage = 0.9
		}
		effect = {
			add_prestige = 15
			create_explorer = { tradition = 30 }
		}
	}

	ONI_break_the_barrier = {
		icon = mission_establish_high_seas_navy
		required_missions = { ONI_form_navy }
		position = 2
		provinces_to_highlight = {
			OR = {
				region = moluccas_region
				region = australia_region
				region = indo_china_region
			}
			NOT = { has_discovered = ROOT }
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = th_break_the_barrier_tt
				OR = {
					moluccas_region = { has_discovered = ROOT }
					australia_region = { has_discovered = ROOT }
					indo_china_region = { has_discovered = ROOT }
				}
			}
		}
		effect = {
			add_dip_power = 75
			add_navy_tradition = 35
			kinai_area = {
				limit = {
					NOT = { is_permanent_claim = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	ONI_training_ocean_navy = {
		icon = mission_corsairs_of_the_north_sea
		required_missions = { ONI_break_the_barrier }
		position = 4
		trigger = {
			num_of_total_ports = 20
			sailors_percentage = 0.6
			OR = {
				num_of_heavy_ship = 30
				num_of_light_ship = 50
			}
			if = {
				limit = {
					has_dlc = "Golden Century"
				}
				has_flagship = yes
			}
			else = {
				navy_tradition = 40
			}
		}
		effect = {
			add_country_modifier = {
				name = touhou_ocean_navy
				duration = 9125
			}
			create_explorer = { tradition = 50 }
		}
	}
	
	ONI_discover_europe = {
		icon = mission_invade_england
		required_missions = { ONI_training_ocean_navy }
		position = 5
		provinces_to_highlight = {
			OR = {
				region = iberia_region
				region = france_region
				region = low_countries_region
				region = british_isles_region
			}
			NOT = { has_discovered = ROOT }
		}
		trigger = {
			custom_trigger_tooltip = {
				tooltip = th_discovers_europe.tooltip
				OR = {
					iberia_region = { has_discovered = ROOT }
					france_region = { has_discovered = ROOT }
					low_countries_region = { has_discovered = ROOT }
					british_isles_region = { has_discovered = ROOT }
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = "touhou_discovery_of_europe"
				duration = 7300
			}
			country_event = { id = TH_mission_events.4 }			
		}
	}
}

oni_missions_europe_slot = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		tag = ONI
		NOT = { map_setup = map_setup_random }
	}
	has_country_shield = yes
	
	ONI_toward_west = {
		icon = mission_touhou_expanded_navy
		required_missions = { 
			ONI_discover_europe
			ONI_wide_outworld
		}
		position = 6
		provinces_to_highlight = {
			OR = {
				area = khuzestan_area
				area = basra_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				OR = {
					area = khuzestan_area
					area = basra_area
				}
				value = 4
			}
		}
		effect = {
			anatolia_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			thrace_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			iraq_arabi_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			al_jazira_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	ONI_attack_france = {
		icon = centralize_france
		required_missions = { ONI_attack_ottoman }
		position = 8
		provinces_to_highlight = {
			region = france_region
			th_produces_wine_or_champagne = yes
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				th_produces_wine_or_champagne = yes
				region = france_region
				value = 6
			}
		}
		effect = {
			add_country_modifier = {
				name = oni_french_wine
				duration = -1
			}
		}
	}
}